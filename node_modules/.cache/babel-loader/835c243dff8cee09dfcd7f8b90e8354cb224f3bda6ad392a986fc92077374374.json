{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"onFinish\", \"step\", \"formRef\", \"title\", \"stepProps\"];\nimport { noteOnce } from \"rc-util/es/warning\";\nimport { useContext, useEffect, useImperativeHandle, useRef } from 'react';\nimport { BaseForm } from \"../../BaseForm\";\nimport { StepsFormProvide } from \"./index\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction StepForm(props) {\n  var formRef = useRef();\n  var context = useContext(StepsFormProvide);\n  var onFinish = props.onFinish,\n    step = props.step,\n    propFormRef = props.formRef,\n    title = props.title,\n    stepProps = props.stepProps,\n    restProps = _objectWithoutProperties(props, _excluded);\n\n  // eslint-disable-next-line @typescript-eslint/dot-notation\n  noteOnce(!restProps['submitter'], 'StepForm 不包含提交按钮，请在 StepsForm 上');\n  /** 重置 formRef */\n  useImperativeHandle(propFormRef, function () {\n    return formRef.current;\n  });\n\n  /** Dom 不存在的时候解除挂载 */\n  useEffect(function () {\n    if (!(props.name || props.step)) return;\n    var name = (props.name || props.step).toString();\n    context === null || context === void 0 ? void 0 : context.regForm(name, props);\n    return function () {\n      context === null || context === void 0 ? void 0 : context.unRegForm(name);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  if (context && context !== null && context !== void 0 && context.formArrayRef) {\n    context.formArrayRef.current[step || 0] = formRef;\n  }\n  return /*#__PURE__*/_jsx(BaseForm, _objectSpread({\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (restProps.name) {\n                context === null || context === void 0 ? void 0 : context.onFormFinish(restProps.name, values);\n              }\n              if (!onFinish) {\n                _context.next = 9;\n                break;\n              }\n              context === null || context === void 0 ? void 0 : context.setLoading(true);\n              // 如果报错，直接抛出\n              _context.next = 5;\n              return onFinish === null || onFinish === void 0 ? void 0 : onFinish(values);\n            case 5:\n              success = _context.sent;\n              if (success) {\n                context === null || context === void 0 ? void 0 : context.next();\n              }\n              context === null || context === void 0 ? void 0 : context.setLoading(false);\n              return _context.abrupt(\"return\");\n            case 9:\n              if (!(context !== null && context !== void 0 && context.lastStep)) context === null || context === void 0 ? void 0 : context.next();\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    layout: \"vertical\"\n  }, restProps));\n}\nexport default StepForm;","map":{"version":3,"names":["_objectSpread","_regeneratorRuntime","_asyncToGenerator","_objectWithoutProperties","_excluded","noteOnce","useContext","useEffect","useImperativeHandle","useRef","BaseForm","StepsFormProvide","jsx","_jsx","StepForm","props","formRef","context","onFinish","step","propFormRef","title","stepProps","restProps","current","name","toString","regForm","unRegForm","formArrayRef","_ref","mark","_callee","values","success","wrap","_callee$","_context","prev","next","onFormFinish","setLoading","sent","abrupt","lastStep","stop","_x","apply","arguments","layout"],"sources":["D:/LearnDeveloper/ReactJS/student-management-infor/node_modules/@ant-design/pro-form/es/layouts/StepsForm/StepForm.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"onFinish\", \"step\", \"formRef\", \"title\", \"stepProps\"];\nimport { noteOnce } from \"rc-util/es/warning\";\nimport { useContext, useEffect, useImperativeHandle, useRef } from 'react';\nimport { BaseForm } from \"../../BaseForm\";\nimport { StepsFormProvide } from \"./index\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction StepForm(props) {\n  var formRef = useRef();\n  var context = useContext(StepsFormProvide);\n  var onFinish = props.onFinish,\n    step = props.step,\n    propFormRef = props.formRef,\n    title = props.title,\n    stepProps = props.stepProps,\n    restProps = _objectWithoutProperties(props, _excluded);\n\n  // eslint-disable-next-line @typescript-eslint/dot-notation\n  noteOnce(!restProps['submitter'], 'StepForm 不包含提交按钮，请在 StepsForm 上');\n  /** 重置 formRef */\n  useImperativeHandle(propFormRef, function () {\n    return formRef.current;\n  });\n\n  /** Dom 不存在的时候解除挂载 */\n  useEffect(function () {\n    if (!(props.name || props.step)) return;\n    var name = (props.name || props.step).toString();\n    context === null || context === void 0 ? void 0 : context.regForm(name, props);\n    return function () {\n      context === null || context === void 0 ? void 0 : context.unRegForm(name);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  if (context && context !== null && context !== void 0 && context.formArrayRef) {\n    context.formArrayRef.current[step || 0] = formRef;\n  }\n  return /*#__PURE__*/_jsx(BaseForm, _objectSpread({\n    formRef: formRef,\n    onFinish: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(values) {\n        var success;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (restProps.name) {\n                context === null || context === void 0 ? void 0 : context.onFormFinish(restProps.name, values);\n              }\n              if (!onFinish) {\n                _context.next = 9;\n                break;\n              }\n              context === null || context === void 0 ? void 0 : context.setLoading(true);\n              // 如果报错，直接抛出\n              _context.next = 5;\n              return onFinish === null || onFinish === void 0 ? void 0 : onFinish(values);\n            case 5:\n              success = _context.sent;\n              if (success) {\n                context === null || context === void 0 ? void 0 : context.next();\n              }\n              context === null || context === void 0 ? void 0 : context.setLoading(false);\n              return _context.abrupt(\"return\");\n            case 9:\n              if (!(context !== null && context !== void 0 && context.lastStep)) context === null || context === void 0 ? void 0 : context.next();\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    layout: \"vertical\"\n  }, restProps));\n}\nexport default StepForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}