{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"data\", \"success\", \"total\"];\nimport { runFunction, useDebounceFn, useDeepCompareEffect, useMountMergeState, usePrevious, useRefFunction } from '@ant-design/pro-utils';\nimport { useEffect, useRef } from 'react';\nimport { postDataPipeline } from \"./utils/index\";\n\n/**\n * 组合用户的配置和默认值\n *\n * @param param0\n */\nvar mergeOptionAndPageInfo = function mergeOptionAndPageInfo(_ref) {\n  var pageInfo = _ref.pageInfo;\n  if (pageInfo) {\n    var current = pageInfo.current,\n      defaultCurrent = pageInfo.defaultCurrent,\n      pageSize = pageInfo.pageSize,\n      defaultPageSize = pageInfo.defaultPageSize;\n    return {\n      current: current || defaultCurrent || 1,\n      total: 0,\n      pageSize: pageSize || defaultPageSize || 20\n    };\n  }\n  return {\n    current: 1,\n    total: 0,\n    pageSize: 20\n  };\n};\nvar useFetchData = function useFetchData(getData, defaultData, options) {\n  var umountRef = useRef(false);\n  var _ref2 = options || {},\n    onLoad = _ref2.onLoad,\n    manual = _ref2.manual,\n    polling = _ref2.polling,\n    onRequestError = _ref2.onRequestError,\n    _ref2$debounceTime = _ref2.debounceTime,\n    debounceTime = _ref2$debounceTime === void 0 ? 20 : _ref2$debounceTime;\n\n  /** 是否首次加载的指示器 */\n  var manualRequestRef = useRef(manual);\n\n  /** 轮询的setTime ID 存储 */\n  var pollingSetTimeRef = useRef();\n\n  /**\n   * 用于存储最新的数据，这样可以在切换的时候保持数据的一致性\n   */\n  var _useMountMergeState = useMountMergeState(defaultData, {\n      value: options === null || options === void 0 ? void 0 : options.dataSource,\n      onChange: options === null || options === void 0 ? void 0 : options.onDataSourceChange\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    tableDataList = _useMountMergeState2[0],\n    setTableDataList = _useMountMergeState2[1];\n\n  /**\n   * 表格的加载状态\n   */\n  var _useMountMergeState3 = useMountMergeState(false, {\n      value: options === null || options === void 0 ? void 0 : options.loading,\n      onChange: options === null || options === void 0 ? void 0 : options.onLoadingChange\n    }),\n    _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n    tableLoading = _useMountMergeState4[0],\n    setTableLoading = _useMountMergeState4[1];\n  var requesting = useRef(false);\n  var _useMountMergeState5 = useMountMergeState(function () {\n      return mergeOptionAndPageInfo(options);\n    }, {\n      onChange: options === null || options === void 0 ? void 0 : options.onPageInfoChange\n    }),\n    _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n    pageInfo = _useMountMergeState6[0],\n    setPageInfoState = _useMountMergeState6[1];\n  var _setPageInfo = useRefFunction(function (changePageInfo) {\n    if (changePageInfo.current !== pageInfo.current || changePageInfo.pageSize !== pageInfo.pageSize || changePageInfo.total !== pageInfo.total) {\n      setPageInfoState(changePageInfo);\n    }\n  });\n  var _useMountMergeState7 = useMountMergeState(false),\n    _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n    pollingLoading = _useMountMergeState8[0],\n    setPollingLoading = _useMountMergeState8[1];\n\n  // Batching update  https://github.com/facebook/react/issues/14259\n  var setDataAndLoading = function setDataAndLoading(newData, dataTotal) {\n    setTableDataList(newData);\n    if ((pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.total) !== dataTotal) {\n      _setPageInfo(_objectSpread(_objectSpread({}, pageInfo), {}, {\n        total: dataTotal || newData.length\n      }));\n    }\n  };\n\n  // pre state\n  var prePage = usePrevious(pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current);\n  var prePageSize = usePrevious(pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize);\n  var prePolling = usePrevious(polling);\n  var _ref3 = options || {},\n    _ref3$effects = _ref3.effects,\n    effects = _ref3$effects === void 0 ? [] : _ref3$effects;\n\n  /**\n   * 不这样做会导致状态不更新\n   *\n   * https://github.com/ant-design/pro-components/issues/4390\n   */\n  var requestFinally = useRefFunction(function () {\n    if (_typeof(tableLoading) === 'object') {\n      setTableLoading(_objectSpread(_objectSpread({}, tableLoading), {}, {\n        spinning: false\n      }));\n    } else {\n      setTableLoading(false);\n    }\n    setPollingLoading(false);\n  });\n  /** 请求数据 */\n  var fetchList = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(isPolling) {\n      var _ref5, pageSize, current, pageParams, _ref6, _ref6$data, data, success, _ref6$total, total, rest, responseData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!manualRequestRef.current) {\n              _context.next = 3;\n              break;\n            }\n            manualRequestRef.current = false;\n            return _context.abrupt(\"return\");\n          case 3:\n            if (!isPolling) {\n              if (_typeof(tableLoading) === 'object') {\n                setTableLoading(_objectSpread(_objectSpread({}, tableLoading), {}, {\n                  spinning: true\n                }));\n              } else {\n                setTableLoading(true);\n              }\n            } else {\n              setPollingLoading(true);\n            }\n            requesting.current = true;\n            _ref5 = pageInfo || {}, pageSize = _ref5.pageSize, current = _ref5.current;\n            _context.prev = 6;\n            pageParams = (options === null || options === void 0 ? void 0 : options.pageInfo) !== false ? {\n              current: current,\n              pageSize: pageSize\n            } : undefined;\n            _context.next = 10;\n            return getData === null || getData === void 0 ? void 0 : getData(pageParams);\n          case 10:\n            _context.t0 = _context.sent;\n            if (_context.t0) {\n              _context.next = 13;\n              break;\n            }\n            _context.t0 = {};\n          case 13:\n            _ref6 = _context.t0;\n            _ref6$data = _ref6.data;\n            data = _ref6$data === void 0 ? [] : _ref6$data;\n            success = _ref6.success;\n            _ref6$total = _ref6.total;\n            total = _ref6$total === void 0 ? 0 : _ref6$total;\n            rest = _objectWithoutProperties(_ref6, _excluded);\n            if (!(success === false)) {\n              _context.next = 22;\n              break;\n            }\n            return _context.abrupt(\"return\", []);\n          case 22:\n            responseData = postDataPipeline(data, [options.postData].filter(function (item) {\n              return item;\n            })); // 设置表格数据\n            setDataAndLoading(responseData, total);\n            onLoad === null || onLoad === void 0 ? void 0 : onLoad(responseData, rest);\n            return _context.abrupt(\"return\", responseData);\n          case 28:\n            _context.prev = 28;\n            _context.t1 = _context[\"catch\"](6);\n            if (!(onRequestError === undefined)) {\n              _context.next = 32;\n              break;\n            }\n            throw new Error(_context.t1);\n          case 32:\n            if (tableDataList === undefined) setTableDataList([]);\n            onRequestError(_context.t1);\n          case 34:\n            _context.prev = 34;\n            requesting.current = false;\n            requestFinally();\n            return _context.finish(34);\n          case 38:\n            return _context.abrupt(\"return\", []);\n          case 39:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[6, 28, 34, 38]]);\n    }));\n    return function fetchList(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var fetchListDebounce = useDebounceFn( /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(isPolling) {\n      var msg, needPolling;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (pollingSetTimeRef.current) {\n              clearTimeout(pollingSetTimeRef.current);\n            }\n            if (!(tableLoading && typeof tableLoading === 'boolean' || requesting.current || !getData)) {\n              _context2.next = 3;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 3:\n            _context2.next = 5;\n            return fetchList(isPolling);\n          case 5:\n            msg = _context2.sent;\n            // 把判断要不要轮询的逻辑放到后面来这样可以保证数据是根据当前来\n            // 放到请求前面会导致数据是上一次的\n            needPolling = runFunction(polling, msg); // 如果需要轮询，搞个一段时间后执行\n            // 如果解除了挂载，删除一下\n            if (needPolling && !umountRef.current) {\n              pollingSetTimeRef.current = setTimeout(function () {\n                fetchListDebounce.run(needPolling);\n                // 这里判断最小要2000ms，不然一直loading\n              }, Math.max(needPolling, 2000));\n            }\n            return _context2.abrupt(\"return\", msg);\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x2) {\n      return _ref7.apply(this, arguments);\n    };\n  }(), debounceTime || 30);\n\n  // 如果轮询结束了，直接销毁定时器\n  useEffect(function () {\n    if (!polling) {\n      clearTimeout(pollingSetTimeRef.current);\n    }\n    if (!prePolling && polling) {\n      fetchListDebounce.run(true);\n    }\n    return function () {\n      clearTimeout(pollingSetTimeRef.current);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [polling]);\n  useEffect(function () {\n    umountRef.current = false;\n    return function () {\n      umountRef.current = true;\n    };\n  }, []);\n\n  /** PageIndex 改变的时候自动刷新 */\n  useEffect(function () {\n    var _ref8 = pageInfo || {},\n      current = _ref8.current,\n      pageSize = _ref8.pageSize;\n    // 如果上次的页码为空或者两次页码等于是没必要查询的\n    // 如果 pageSize 发生变化是需要查询的，所以又加了 prePageSize\n    if ((!prePage || prePage === current) && (!prePageSize || prePageSize === pageSize)) {\n      return;\n    }\n    if (options.pageInfo && tableDataList && (tableDataList === null || tableDataList === void 0 ? void 0 : tableDataList.length) > pageSize || 0) {\n      return;\n    }\n\n    // 如果 list 的长度大于 pageSize 的长度\n    // 说明是一个假分页\n    // (pageIndex - 1 || 1) 至少要第一页\n    // 在第一页大于 10\n    // 第二页也应该是大于 10\n    if (current !== undefined && tableDataList && tableDataList.length <= pageSize) {\n      fetchListDebounce.run(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current]);\n\n  // pageSize 修改后返回第一页\n  useEffect(function () {\n    if (!prePageSize) {\n      return;\n    }\n    fetchListDebounce.run(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize]);\n  useDeepCompareEffect(function () {\n    fetchListDebounce.run(false);\n    if (!manual) {\n      manualRequestRef.current = false;\n    }\n    return function () {\n      fetchListDebounce.cancel();\n    };\n  }, [].concat(_toConsumableArray(effects), [manual]));\n  return {\n    dataSource: tableDataList,\n    setDataSource: setTableDataList,\n    loading: tableLoading,\n    reload: function () {\n      var _reload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", fetchListDebounce.run(false));\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      function reload() {\n        return _reload.apply(this, arguments);\n      }\n      return reload;\n    }(),\n    pageInfo: pageInfo,\n    pollingLoading: pollingLoading,\n    reset: function () {\n      var _reset = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _ref9, optionPageInfo, _ref10, _ref10$defaultCurrent, defaultCurrent, _ref10$defaultPageSiz, defaultPageSize, initialPageInfo;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _ref9 = options || {}, optionPageInfo = _ref9.pageInfo;\n              _ref10 = optionPageInfo || {}, _ref10$defaultCurrent = _ref10.defaultCurrent, defaultCurrent = _ref10$defaultCurrent === void 0 ? 1 : _ref10$defaultCurrent, _ref10$defaultPageSiz = _ref10.defaultPageSize, defaultPageSize = _ref10$defaultPageSiz === void 0 ? 20 : _ref10$defaultPageSiz;\n              initialPageInfo = {\n                current: defaultCurrent,\n                total: 0,\n                pageSize: defaultPageSize\n              };\n              _setPageInfo(initialPageInfo);\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      function reset() {\n        return _reset.apply(this, arguments);\n      }\n      return reset;\n    }(),\n    setPageInfo: function () {\n      var _setPageInfo2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(info) {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _setPageInfo(_objectSpread(_objectSpread({}, pageInfo), info));\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n      function setPageInfo(_x3) {\n        return _setPageInfo2.apply(this, arguments);\n      }\n      return setPageInfo;\n    }()\n  };\n};\nexport default useFetchData;","map":{"version":3,"names":["_toConsumableArray","_regeneratorRuntime","_objectWithoutProperties","_asyncToGenerator","_typeof","_objectSpread","_slicedToArray","_excluded","runFunction","useDebounceFn","useDeepCompareEffect","useMountMergeState","usePrevious","useRefFunction","useEffect","useRef","postDataPipeline","mergeOptionAndPageInfo","_ref","pageInfo","current","defaultCurrent","pageSize","defaultPageSize","total","useFetchData","getData","defaultData","options","umountRef","_ref2","onLoad","manual","polling","onRequestError","_ref2$debounceTime","debounceTime","manualRequestRef","pollingSetTimeRef","_useMountMergeState","value","dataSource","onChange","onDataSourceChange","_useMountMergeState2","tableDataList","setTableDataList","_useMountMergeState3","loading","onLoadingChange","_useMountMergeState4","tableLoading","setTableLoading","requesting","_useMountMergeState5","onPageInfoChange","_useMountMergeState6","setPageInfoState","_setPageInfo","changePageInfo","_useMountMergeState7","_useMountMergeState8","pollingLoading","setPollingLoading","setDataAndLoading","newData","dataTotal","length","prePage","prePageSize","prePolling","_ref3","_ref3$effects","effects","requestFinally","spinning","fetchList","_ref4","mark","_callee","isPolling","_ref5","pageParams","_ref6","_ref6$data","data","success","_ref6$total","rest","responseData","wrap","_callee$","_context","prev","next","abrupt","undefined","t0","sent","postData","filter","item","t1","Error","finish","stop","_x","apply","arguments","fetchListDebounce","_ref7","_callee2","msg","needPolling","_callee2$","_context2","clearTimeout","setTimeout","run","Math","max","_x2","_ref8","cancel","concat","setDataSource","reload","_reload","_callee3","_callee3$","_context3","reset","_reset","_callee4","_ref9","optionPageInfo","_ref10","_ref10$defaultCurrent","_ref10$defaultPageSiz","initialPageInfo","_callee4$","_context4","setPageInfo","_setPageInfo2","_callee5","info","_callee5$","_context5","_x3"],"sources":["D:/LearnDeveloper/ReactJS/student-management-infor/node_modules/@ant-design/pro-table/es/useFetchData.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"data\", \"success\", \"total\"];\nimport { runFunction, useDebounceFn, useDeepCompareEffect, useMountMergeState, usePrevious, useRefFunction } from '@ant-design/pro-utils';\nimport { useEffect, useRef } from 'react';\nimport { postDataPipeline } from \"./utils/index\";\n\n/**\n * 组合用户的配置和默认值\n *\n * @param param0\n */\nvar mergeOptionAndPageInfo = function mergeOptionAndPageInfo(_ref) {\n  var pageInfo = _ref.pageInfo;\n  if (pageInfo) {\n    var current = pageInfo.current,\n      defaultCurrent = pageInfo.defaultCurrent,\n      pageSize = pageInfo.pageSize,\n      defaultPageSize = pageInfo.defaultPageSize;\n    return {\n      current: current || defaultCurrent || 1,\n      total: 0,\n      pageSize: pageSize || defaultPageSize || 20\n    };\n  }\n  return {\n    current: 1,\n    total: 0,\n    pageSize: 20\n  };\n};\nvar useFetchData = function useFetchData(getData, defaultData, options) {\n  var umountRef = useRef(false);\n  var _ref2 = options || {},\n    onLoad = _ref2.onLoad,\n    manual = _ref2.manual,\n    polling = _ref2.polling,\n    onRequestError = _ref2.onRequestError,\n    _ref2$debounceTime = _ref2.debounceTime,\n    debounceTime = _ref2$debounceTime === void 0 ? 20 : _ref2$debounceTime;\n\n  /** 是否首次加载的指示器 */\n  var manualRequestRef = useRef(manual);\n\n  /** 轮询的setTime ID 存储 */\n  var pollingSetTimeRef = useRef();\n\n  /**\n   * 用于存储最新的数据，这样可以在切换的时候保持数据的一致性\n   */\n  var _useMountMergeState = useMountMergeState(defaultData, {\n      value: options === null || options === void 0 ? void 0 : options.dataSource,\n      onChange: options === null || options === void 0 ? void 0 : options.onDataSourceChange\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    tableDataList = _useMountMergeState2[0],\n    setTableDataList = _useMountMergeState2[1];\n\n  /**\n   * 表格的加载状态\n   */\n  var _useMountMergeState3 = useMountMergeState(false, {\n      value: options === null || options === void 0 ? void 0 : options.loading,\n      onChange: options === null || options === void 0 ? void 0 : options.onLoadingChange\n    }),\n    _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n    tableLoading = _useMountMergeState4[0],\n    setTableLoading = _useMountMergeState4[1];\n  var requesting = useRef(false);\n  var _useMountMergeState5 = useMountMergeState(function () {\n      return mergeOptionAndPageInfo(options);\n    }, {\n      onChange: options === null || options === void 0 ? void 0 : options.onPageInfoChange\n    }),\n    _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n    pageInfo = _useMountMergeState6[0],\n    setPageInfoState = _useMountMergeState6[1];\n  var _setPageInfo = useRefFunction(function (changePageInfo) {\n    if (changePageInfo.current !== pageInfo.current || changePageInfo.pageSize !== pageInfo.pageSize || changePageInfo.total !== pageInfo.total) {\n      setPageInfoState(changePageInfo);\n    }\n  });\n  var _useMountMergeState7 = useMountMergeState(false),\n    _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n    pollingLoading = _useMountMergeState8[0],\n    setPollingLoading = _useMountMergeState8[1];\n\n  // Batching update  https://github.com/facebook/react/issues/14259\n  var setDataAndLoading = function setDataAndLoading(newData, dataTotal) {\n    setTableDataList(newData);\n    if ((pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.total) !== dataTotal) {\n      _setPageInfo(_objectSpread(_objectSpread({}, pageInfo), {}, {\n        total: dataTotal || newData.length\n      }));\n    }\n  };\n\n  // pre state\n  var prePage = usePrevious(pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current);\n  var prePageSize = usePrevious(pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize);\n  var prePolling = usePrevious(polling);\n  var _ref3 = options || {},\n    _ref3$effects = _ref3.effects,\n    effects = _ref3$effects === void 0 ? [] : _ref3$effects;\n\n  /**\n   * 不这样做会导致状态不更新\n   *\n   * https://github.com/ant-design/pro-components/issues/4390\n   */\n  var requestFinally = useRefFunction(function () {\n    if (_typeof(tableLoading) === 'object') {\n      setTableLoading(_objectSpread(_objectSpread({}, tableLoading), {}, {\n        spinning: false\n      }));\n    } else {\n      setTableLoading(false);\n    }\n    setPollingLoading(false);\n  });\n  /** 请求数据 */\n  var fetchList = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(isPolling) {\n      var _ref5, pageSize, current, pageParams, _ref6, _ref6$data, data, success, _ref6$total, total, rest, responseData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!manualRequestRef.current) {\n              _context.next = 3;\n              break;\n            }\n            manualRequestRef.current = false;\n            return _context.abrupt(\"return\");\n          case 3:\n            if (!isPolling) {\n              if (_typeof(tableLoading) === 'object') {\n                setTableLoading(_objectSpread(_objectSpread({}, tableLoading), {}, {\n                  spinning: true\n                }));\n              } else {\n                setTableLoading(true);\n              }\n            } else {\n              setPollingLoading(true);\n            }\n            requesting.current = true;\n            _ref5 = pageInfo || {}, pageSize = _ref5.pageSize, current = _ref5.current;\n            _context.prev = 6;\n            pageParams = (options === null || options === void 0 ? void 0 : options.pageInfo) !== false ? {\n              current: current,\n              pageSize: pageSize\n            } : undefined;\n            _context.next = 10;\n            return getData === null || getData === void 0 ? void 0 : getData(pageParams);\n          case 10:\n            _context.t0 = _context.sent;\n            if (_context.t0) {\n              _context.next = 13;\n              break;\n            }\n            _context.t0 = {};\n          case 13:\n            _ref6 = _context.t0;\n            _ref6$data = _ref6.data;\n            data = _ref6$data === void 0 ? [] : _ref6$data;\n            success = _ref6.success;\n            _ref6$total = _ref6.total;\n            total = _ref6$total === void 0 ? 0 : _ref6$total;\n            rest = _objectWithoutProperties(_ref6, _excluded);\n            if (!(success === false)) {\n              _context.next = 22;\n              break;\n            }\n            return _context.abrupt(\"return\", []);\n          case 22:\n            responseData = postDataPipeline(data, [options.postData].filter(function (item) {\n              return item;\n            })); // 设置表格数据\n            setDataAndLoading(responseData, total);\n            onLoad === null || onLoad === void 0 ? void 0 : onLoad(responseData, rest);\n            return _context.abrupt(\"return\", responseData);\n          case 28:\n            _context.prev = 28;\n            _context.t1 = _context[\"catch\"](6);\n            if (!(onRequestError === undefined)) {\n              _context.next = 32;\n              break;\n            }\n            throw new Error(_context.t1);\n          case 32:\n            if (tableDataList === undefined) setTableDataList([]);\n            onRequestError(_context.t1);\n          case 34:\n            _context.prev = 34;\n            requesting.current = false;\n            requestFinally();\n            return _context.finish(34);\n          case 38:\n            return _context.abrupt(\"return\", []);\n          case 39:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[6, 28, 34, 38]]);\n    }));\n    return function fetchList(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var fetchListDebounce = useDebounceFn( /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(isPolling) {\n      var msg, needPolling;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (pollingSetTimeRef.current) {\n              clearTimeout(pollingSetTimeRef.current);\n            }\n            if (!(tableLoading && typeof tableLoading === 'boolean' || requesting.current || !getData)) {\n              _context2.next = 3;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 3:\n            _context2.next = 5;\n            return fetchList(isPolling);\n          case 5:\n            msg = _context2.sent;\n            // 把判断要不要轮询的逻辑放到后面来这样可以保证数据是根据当前来\n            // 放到请求前面会导致数据是上一次的\n            needPolling = runFunction(polling, msg); // 如果需要轮询，搞个一段时间后执行\n            // 如果解除了挂载，删除一下\n            if (needPolling && !umountRef.current) {\n              pollingSetTimeRef.current = setTimeout(function () {\n                fetchListDebounce.run(needPolling);\n                // 这里判断最小要2000ms，不然一直loading\n              }, Math.max(needPolling, 2000));\n            }\n            return _context2.abrupt(\"return\", msg);\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x2) {\n      return _ref7.apply(this, arguments);\n    };\n  }(), debounceTime || 30);\n\n  // 如果轮询结束了，直接销毁定时器\n  useEffect(function () {\n    if (!polling) {\n      clearTimeout(pollingSetTimeRef.current);\n    }\n    if (!prePolling && polling) {\n      fetchListDebounce.run(true);\n    }\n    return function () {\n      clearTimeout(pollingSetTimeRef.current);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [polling]);\n  useEffect(function () {\n    umountRef.current = false;\n    return function () {\n      umountRef.current = true;\n    };\n  }, []);\n\n  /** PageIndex 改变的时候自动刷新 */\n  useEffect(function () {\n    var _ref8 = pageInfo || {},\n      current = _ref8.current,\n      pageSize = _ref8.pageSize;\n    // 如果上次的页码为空或者两次页码等于是没必要查询的\n    // 如果 pageSize 发生变化是需要查询的，所以又加了 prePageSize\n    if ((!prePage || prePage === current) && (!prePageSize || prePageSize === pageSize)) {\n      return;\n    }\n    if (options.pageInfo && tableDataList && (tableDataList === null || tableDataList === void 0 ? void 0 : tableDataList.length) > pageSize || 0) {\n      return;\n    }\n\n    // 如果 list 的长度大于 pageSize 的长度\n    // 说明是一个假分页\n    // (pageIndex - 1 || 1) 至少要第一页\n    // 在第一页大于 10\n    // 第二页也应该是大于 10\n    if (current !== undefined && tableDataList && tableDataList.length <= pageSize) {\n      fetchListDebounce.run(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current]);\n\n  // pageSize 修改后返回第一页\n  useEffect(function () {\n    if (!prePageSize) {\n      return;\n    }\n    fetchListDebounce.run(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize]);\n  useDeepCompareEffect(function () {\n    fetchListDebounce.run(false);\n    if (!manual) {\n      manualRequestRef.current = false;\n    }\n    return function () {\n      fetchListDebounce.cancel();\n    };\n  }, [].concat(_toConsumableArray(effects), [manual]));\n  return {\n    dataSource: tableDataList,\n    setDataSource: setTableDataList,\n    loading: tableLoading,\n    reload: function () {\n      var _reload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", fetchListDebounce.run(false));\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      function reload() {\n        return _reload.apply(this, arguments);\n      }\n      return reload;\n    }(),\n    pageInfo: pageInfo,\n    pollingLoading: pollingLoading,\n    reset: function () {\n      var _reset = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _ref9, optionPageInfo, _ref10, _ref10$defaultCurrent, defaultCurrent, _ref10$defaultPageSiz, defaultPageSize, initialPageInfo;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _ref9 = options || {}, optionPageInfo = _ref9.pageInfo;\n              _ref10 = optionPageInfo || {}, _ref10$defaultCurrent = _ref10.defaultCurrent, defaultCurrent = _ref10$defaultCurrent === void 0 ? 1 : _ref10$defaultCurrent, _ref10$defaultPageSiz = _ref10.defaultPageSize, defaultPageSize = _ref10$defaultPageSiz === void 0 ? 20 : _ref10$defaultPageSiz;\n              initialPageInfo = {\n                current: defaultCurrent,\n                total: 0,\n                pageSize: defaultPageSize\n              };\n              _setPageInfo(initialPageInfo);\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      function reset() {\n        return _reset.apply(this, arguments);\n      }\n      return reset;\n    }(),\n    setPageInfo: function () {\n      var _setPageInfo2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(info) {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _setPageInfo(_objectSpread(_objectSpread({}, pageInfo), info));\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n      function setPageInfo(_x3) {\n        return _setPageInfo2.apply(this, arguments);\n      }\n      return setPageInfo;\n    }()\n  };\n};\nexport default useFetchData;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}