{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"tableClassName\", \"defaultClassName\", \"action\", \"tableColumn\", \"type\", \"pagination\", \"rowSelection\", \"size\", \"defaultSize\", \"tableStyle\", \"toolbarDom\", \"searchNode\", \"style\", \"cardProps\", \"alertDom\", \"name\", \"onSortChange\", \"onFilterChange\", \"options\", \"isLightFilter\", \"className\", \"cardBordered\", \"editableUtils\", \"getRowKey\"],\n  _excluded2 = [\"cardBordered\", \"request\", \"className\", \"params\", \"defaultData\", \"headerTitle\", \"postData\", \"ghost\", \"pagination\", \"actionRef\", \"columns\", \"toolBarRender\", \"onLoad\", \"onRequestError\", \"style\", \"cardProps\", \"tableStyle\", \"tableClassName\", \"columnsStateMap\", \"onColumnsStateChange\", \"options\", \"search\", \"name\", \"onLoadingChange\", \"rowSelection\", \"beforeSearchSubmit\", \"tableAlertRender\", \"defaultClassName\", \"formRef\", \"type\", \"columnEmptyText\", \"toolbar\", \"rowKey\", \"manualRequest\", \"polling\", \"tooltip\", \"revalidateOnFocus\"];\n// å…¼å®¹ä»£ç -----------\nimport \"antd/es/table/style\";\nimport \"antd/es/typography/style\";\n//----------------------\n\nimport ProCard from '@ant-design/pro-card';\nimport ProForm from '@ant-design/pro-form';\nimport { ProConfigProvider, useIntl } from '@ant-design/pro-provider';\nimport { editableRowByKey, ErrorBoundary, omitUndefined, recordKeyToString, useDeepCompareEffect, useDeepCompareEffectDebounce, useEditableArray, useMountMergeState } from '@ant-design/pro-utils';\nimport { ConfigProvider, Table } from 'antd';\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport Alert from \"./components/Alert\";\nimport FormRender from \"./components/Form\";\nimport Toolbar from \"./components/ToolBar\";\nimport { Container, TableContext } from \"./Store/Provide\";\nimport { useStyle } from \"./style\";\nimport useFetchData from \"./useFetchData\";\nimport { genColumnKey, isBordered, mergePagination, parseDefaultColumnConfig, useActionType } from \"./utils\";\nimport { columnSort } from \"./utils/columnSort\";\nimport { genProColumnToColumn } from \"./utils/genProColumnToColumn\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction TableRender(props) {\n  var rowKey = props.rowKey,\n    tableClassName = props.tableClassName,\n    defaultClassName = props.defaultClassName,\n    action = props.action,\n    tableColumns = props.tableColumn,\n    type = props.type,\n    pagination = props.pagination,\n    rowSelection = props.rowSelection,\n    size = props.size,\n    defaultSize = props.defaultSize,\n    tableStyle = props.tableStyle,\n    toolbarDom = props.toolbarDom,\n    searchNode = props.searchNode,\n    style = props.style,\n    propsCardProps = props.cardProps,\n    alertDom = props.alertDom,\n    name = props.name,\n    onSortChange = props.onSortChange,\n    onFilterChange = props.onFilterChange,\n    options = props.options,\n    isLightFilter = props.isLightFilter,\n    className = props.className,\n    cardBordered = props.cardBordered,\n    editableUtils = props.editableUtils,\n    getRowKey = props.getRowKey,\n    rest = _objectWithoutProperties(props, _excluded);\n  var counter = useContext(TableContext);\n\n  /** éœ€è¦éå†ä¸€ä¸‹ï¼Œä¸ç„¶ä¸æ”¯æŒåµŒå¥—è¡¨æ ¼ */\n  var columns = useMemo(function () {\n    var loopFilter = function loopFilter(column) {\n      return column.map(function (item) {\n        // åˆ æ‰ä¸åº”è¯¥æ˜¾ç¤ºçš„\n        var columnKey = genColumnKey(item.key, item.index);\n        var config = counter.columnsMap[columnKey];\n        if (config && config.show === false) {\n          return false;\n        }\n        if (item.children) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            children: loopFilter(item.children)\n          });\n        }\n        return item;\n      }).filter(Boolean);\n    };\n    return loopFilter(tableColumns);\n  }, [counter.columnsMap, tableColumns]);\n\n  /** å¦‚æœæ‰€æœ‰åˆ—ä¸­çš„ filters=true| undefined è¯´æ˜æ˜¯ç”¨çš„æ˜¯æœ¬åœ°ç­›é€‰ ä»»ä½•ä¸€åˆ—é…ç½® filters=falseï¼Œå°±èƒ½ç»•è¿‡è¿™ä¸ªåˆ¤æ–­ */\n  var useLocaleFilter = useMemo(function () {\n    return columns === null || columns === void 0 ? void 0 : columns.every(function (column) {\n      return column.filters === true && column.onFilter === true || column.filters === undefined && column.onFilter === undefined;\n    });\n  }, [columns]);\n\n  /**\n   * å¦‚æœæ˜¯åˆ†é¡µçš„æ–°å¢ï¼Œæ€»æ˜¯åŠ åˆ°æœ€åä¸€è¡Œ\n   *\n   * @returns\n   */\n  var editableDataSource = function editableDataSource(dataSource) {\n    var _ref = editableUtils.newLineRecord || {},\n      newLineOptions = _ref.options,\n      row = _ref.defaultValue;\n    if (newLineOptions !== null && newLineOptions !== void 0 && newLineOptions.parentKey) {\n      var _recordKeyToString, _props$expandable;\n      var actionProps = {\n        data: dataSource,\n        getRowKey: getRowKey,\n        row: _objectSpread(_objectSpread({}, row), {}, {\n          map_row_parentKey: (_recordKeyToString = recordKeyToString(newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.parentKey)) === null || _recordKeyToString === void 0 ? void 0 : _recordKeyToString.toString()\n        }),\n        key: newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.recordKey,\n        childrenColumnName: ((_props$expandable = props.expandable) === null || _props$expandable === void 0 ? void 0 : _props$expandable.childrenColumnName) || 'children'\n      };\n      return editableRowByKey(actionProps, newLineOptions.position === 'top' ? 'top' : 'update');\n    }\n    if ((newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.position) === 'top') {\n      return [row].concat(_toConsumableArray(action.dataSource));\n    }\n    // å¦‚æœæœ‰åˆ†é¡µçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åŠ åˆ°è¿™ä¸€é¡µçš„æœ«å°¾\n    if (pagination && pagination !== null && pagination !== void 0 && pagination.current && pagination !== null && pagination !== void 0 && pagination.pageSize) {\n      var newDataSource = _toConsumableArray(action.dataSource);\n      if ((pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) > newDataSource.length) {\n        newDataSource.push(row);\n        return newDataSource;\n      }\n      newDataSource.splice((pagination === null || pagination === void 0 ? void 0 : pagination.current) * (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) - 1, 0, row);\n      return newDataSource;\n    }\n    return [].concat(_toConsumableArray(action.dataSource), [row]);\n  };\n  var getTableProps = function getTableProps() {\n    return _objectSpread(_objectSpread({}, rest), {}, {\n      size: size,\n      rowSelection: rowSelection === false ? undefined : rowSelection,\n      className: tableClassName,\n      style: tableStyle,\n      columns: columns.map(function (item) {\n        return item.isExtraColumns ? item.extraColumn : item;\n      }),\n      loading: action.loading,\n      dataSource: editableUtils.newLineRecord ? editableDataSource(action.dataSource) : action.dataSource,\n      pagination: pagination,\n      onChange: function onChange(changePagination, filters, sorter, extra) {\n        var _rest$onChange;\n        (_rest$onChange = rest.onChange) === null || _rest$onChange === void 0 ? void 0 : _rest$onChange.call(rest, changePagination, filters, sorter, extra);\n        if (!useLocaleFilter) {\n          onFilterChange(omitUndefined(filters));\n        }\n        // åˆ¶é€ ç­›é€‰çš„æ•°æ®\n        // åˆ¶é€ ä¸€ä¸ªæ’åºçš„æ•°æ®\n        if (Array.isArray(sorter)) {\n          var data = sorter.reduce(function (pre, value) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, \"\".concat(value.field), value.order));\n          }, {});\n          onSortChange(omitUndefined(data));\n        } else {\n          var _sorter$column;\n          var sorterOfColumn = (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter;\n          var isSortByField = (sorterOfColumn === null || sorterOfColumn === void 0 ? void 0 : sorterOfColumn.toString()) === sorterOfColumn;\n          onSortChange(omitUndefined(_defineProperty({}, \"\".concat(isSortByField ? sorterOfColumn : sorter.field), sorter.order)) || {});\n        }\n      }\n    });\n  };\n\n  /**\n   * æ˜¯å¦éœ€è¦ card æ¥åŒ…è£¹\n   */\n  var notNeedCardDom = useMemo(function () {\n    if (props.search === false && !props.headerTitle && props.toolBarRender === false) {\n      return true;\n    }\n    return false;\n  }, []);\n\n  /** é»˜è®¤çš„ table domï¼Œå¦‚æœæ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œå¤–é¢è¿˜è¦åŒ…ä¸ª form */\n  var baseTableDom = /*#__PURE__*/_jsx(Table, _objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowKey: rowKey\n  }));\n\n  /** è‡ªå®šä¹‰çš„ render */\n  var tableDom = props.tableViewRender ? props.tableViewRender(_objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowSelection: rowSelection !== false ? rowSelection : undefined\n  }), baseTableDom) : baseTableDom;\n  var tableContentDom = useMemo(function () {\n    if (props.editable && !props.name) {\n      var _props$editable, _props$editable2, _props$editable2$form, _props$editable3;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [toolbarDom, alertDom, /*#__PURE__*/_createElement(ProForm, _objectSpread(_objectSpread({}, (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.formProps), {}, {\n          formRef: (_props$editable2 = props.editable) === null || _props$editable2 === void 0 ? void 0 : (_props$editable2$form = _props$editable2.formProps) === null || _props$editable2$form === void 0 ? void 0 : _props$editable2$form.formRef,\n          component: false,\n          form: (_props$editable3 = props.editable) === null || _props$editable3 === void 0 ? void 0 : _props$editable3.form,\n          onValuesChange: editableUtils.onValuesChange,\n          key: \"table\",\n          submitter: false,\n          omitNil: false,\n          dateFormatter: props.dateFormatter\n        }), tableDom)]\n      });\n    }\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [toolbarDom, alertDom, tableDom]\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertDom, props.loading, !!props.editable, tableDom, toolbarDom]);\n  var cardBodyStyle = useMemo(function () {\n    if (propsCardProps === false || notNeedCardDom === true || !!props.name) return {};\n    if (toolbarDom) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    if (toolbarDom && pagination === false) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    if (!toolbarDom) {\n      return {\n        padding: 0\n      };\n    }\n    return {};\n  }, [notNeedCardDom, pagination, props.name, propsCardProps, toolbarDom]);\n\n  /** Table åŒºåŸŸçš„ domï¼Œä¸ºäº†æ–¹ä¾¿ render */\n  var tableAreaDom =\n  // cardProps æˆ–è€… æœ‰äº†name å°±ä¸éœ€è¦è¿™ä¸ªpaddingäº†ï¼Œä¸ç„¶ä¼šå¯¼è‡´ä¸å¥½å¯¹é½\n  propsCardProps === false || notNeedCardDom === true || !!props.name ? tableContentDom : /*#__PURE__*/_jsx(ProCard, _objectSpread(_objectSpread({\n    ghost: props.ghost,\n    bordered: isBordered('table', cardBordered),\n    bodyStyle: cardBodyStyle\n  }, propsCardProps), {}, {\n    children: tableContentDom\n  }));\n  var renderTable = function renderTable() {\n    if (props.tableRender) {\n      return props.tableRender(props, tableAreaDom, {\n        toolbar: toolbarDom || undefined,\n        alert: alertDom || undefined,\n        table: tableDom || undefined\n      });\n    }\n    return tableAreaDom;\n  };\n  var proTableDom = /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(defaultClassName, \"-polling\"), action.pollingLoading)),\n    style: style,\n    ref: counter.rootDomRef,\n    children: [isLightFilter ? null : searchNode, type !== 'form' && props.tableExtraRender && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames(className, \"\".concat(defaultClassName, \"-extra\")),\n      children: props.tableExtraRender(props, action.dataSource || [])\n    }), type !== 'form' && renderTable()]\n  });\n\n  // å¦‚æœä¸éœ€è¦çš„å…¨å±ï¼ŒConfigProvider æ²¡æœ‰æ„ä¹‰\n  if (!options || !(options !== null && options !== void 0 && options.fullScreen)) {\n    return proTableDom;\n  }\n  return /*#__PURE__*/_jsx(ConfigProvider, {\n    getPopupContainer: function getPopupContainer() {\n      return counter.rootDomRef.current || document.body;\n    },\n    children: proTableDom\n  });\n}\nvar emptyObj = {};\nvar ProTable = function ProTable(props) {\n  var _props$expandable2;\n  var cardBordered = props.cardBordered,\n    request = props.request,\n    propsClassName = props.className,\n    _props$params = props.params,\n    params = _props$params === void 0 ? emptyObj : _props$params,\n    defaultData = props.defaultData,\n    headerTitle = props.headerTitle,\n    postData = props.postData,\n    ghost = props.ghost,\n    propsPagination = props.pagination,\n    propsActionRef = props.actionRef,\n    _props$columns = props.columns,\n    propsColumns = _props$columns === void 0 ? [] : _props$columns,\n    toolBarRender = props.toolBarRender,\n    onLoad = props.onLoad,\n    onRequestError = props.onRequestError,\n    style = props.style,\n    cardProps = props.cardProps,\n    tableStyle = props.tableStyle,\n    tableClassName = props.tableClassName,\n    columnsStateMap = props.columnsStateMap,\n    onColumnsStateChange = props.onColumnsStateChange,\n    options = props.options,\n    search = props.search,\n    isEditorTable = props.name,\n    onLoadingChange = props.onLoadingChange,\n    _props$rowSelection = props.rowSelection,\n    propsRowSelection = _props$rowSelection === void 0 ? false : _props$rowSelection,\n    beforeSearchSubmit = props.beforeSearchSubmit,\n    tableAlertRender = props.tableAlertRender,\n    defaultClassName = props.defaultClassName,\n    propRef = props.formRef,\n    _props$type = props.type,\n    type = _props$type === void 0 ? 'table' : _props$type,\n    _props$columnEmptyTex = props.columnEmptyText,\n    columnEmptyText = _props$columnEmptyTex === void 0 ? '-' : _props$columnEmptyTex,\n    toolbar = props.toolbar,\n    rowKey = props.rowKey,\n    manualRequest = props.manualRequest,\n    polling = props.polling,\n    tooltip = props.tooltip,\n    _props$revalidateOnFo = props.revalidateOnFocus,\n    revalidateOnFocus = _props$revalidateOnFo === void 0 ? false : _props$revalidateOnFo,\n    rest = _objectWithoutProperties(props, _excluded2);\n  var _useStyle = useStyle(props.defaultClassName),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  var className = classNames(defaultClassName, propsClassName, hashId);\n\n  /** é€šç”¨çš„æ¥æ“ä½œå­èŠ‚ç‚¹çš„å·¥å…·ç±» */\n  var actionRef = useRef();\n  var defaultFormRef = useRef();\n  var formRef = propRef || defaultFormRef;\n  useImperativeHandle(propsActionRef, function () {\n    return actionRef.current;\n  });\n\n  /** å•é€‰å¤šé€‰çš„ç›¸å…³é€»è¾‘ */\n  var _useMountMergeState = useMountMergeState(propsRowSelection ? (propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.defaultSelectedRowKeys) || [] : undefined, {\n      value: propsRowSelection ? propsRowSelection.selectedRowKeys : undefined\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    selectedRowKeys = _useMountMergeState2[0],\n    setSelectedRowKeys = _useMountMergeState2[1];\n  var _useMountMergeState3 = useMountMergeState(function () {\n      // å¦‚æœæ‰‹åŠ¨æ¨¡å¼ï¼Œæˆ–è€… search ä¸å­˜åœ¨çš„æ—¶å€™è®¾ç½®ä¸º undefined\n      // undefined å°±ä¸ä¼šè§¦å‘é¦–æ¬¡åŠ è½½\n      if (manualRequest || search !== false) {\n        return undefined;\n      }\n      return {};\n    }),\n    _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n    formSearch = _useMountMergeState4[0],\n    setFormSearch = _useMountMergeState4[1];\n  var _useMountMergeState5 = useMountMergeState({}),\n    _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n    proFilter = _useMountMergeState6[0],\n    setProFilter = _useMountMergeState6[1];\n  var _useMountMergeState7 = useMountMergeState({}),\n    _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n    proSort = _useMountMergeState8[0],\n    setProSort = _useMountMergeState8[1];\n\n  /** è®¾ç½®é»˜è®¤æ’åºå’Œç­›é€‰å€¼ */\n  useEffect(function () {\n    var _parseDefaultColumnCo = parseDefaultColumnConfig(propsColumns),\n      sort = _parseDefaultColumnCo.sort,\n      filter = _parseDefaultColumnCo.filter;\n    setProFilter(filter);\n    setProSort(sort);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var intl = useIntl();\n\n  /** éœ€è¦åˆå§‹åŒ– ä¸ç„¶é»˜è®¤å¯èƒ½æŠ¥é”™ è¿™é‡Œå–äº† defaultCurrent å’Œ current ä¸ºäº†ä¿è¯ä¸ä¼šé‡å¤åˆ·æ–° */\n  var fetchPagination = _typeof(propsPagination) === 'object' ? propsPagination : {\n    defaultCurrent: 1,\n    defaultPageSize: 20,\n    pageSize: 20,\n    current: 1\n  };\n  var counter = useContext(TableContext);\n\n  // ============================ useFetchData ============================\n  var fetchData = useMemo(function () {\n    if (!request) return undefined;\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageParams) {\n        var actionParams, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              actionParams = _objectSpread(_objectSpread(_objectSpread({}, pageParams || {}), formSearch), params); // eslint-disable-next-line no-underscore-dangle\n              delete actionParams._timestamp;\n              _context.next = 4;\n              return request(actionParams, proSort, proFilter);\n            case 4:\n              response = _context.sent;\n              return _context.abrupt(\"return\", response);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }, [formSearch, params, proFilter, proSort, request]);\n  var action = useFetchData(fetchData, defaultData, {\n    pageInfo: propsPagination === false ? false : fetchPagination,\n    loading: props.loading,\n    dataSource: props.dataSource,\n    onDataSourceChange: props.onDataSourceChange,\n    onLoad: onLoad,\n    onLoadingChange: onLoadingChange,\n    onRequestError: onRequestError,\n    postData: postData,\n    revalidateOnFocus: revalidateOnFocus,\n    manual: formSearch === undefined,\n    polling: polling,\n    effects: [stringify(params), stringify(formSearch), stringify(proFilter), stringify(proSort)],\n    debounceTime: props.debounceTime,\n    onPageInfoChange: function onPageInfoChange(pageInfo) {\n      var _propsPagination$onCh, _propsPagination$onSh;\n      if (type === 'list' || !propsPagination || !fetchData) return;\n\n      // æ€»æ˜¯è§¦å‘ä¸€ä¸‹ onChange å’Œ  onShowSizeChange\n      // ç›®å‰åªæœ‰ List å’Œ Table æ”¯æŒåˆ†é¡µ, List æœ‰åˆ†é¡µçš„æ—¶å€™æ‰“æ–­ Table çš„åˆ†é¡µ\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onCh = propsPagination.onChange) === null || _propsPagination$onCh === void 0 ? void 0 : _propsPagination$onCh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onSh = propsPagination.onShowSizeChange) === null || _propsPagination$onSh === void 0 ? void 0 : _propsPagination$onSh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n    }\n  });\n  // ============================ END ============================\n\n  /** é»˜è®¤èšç„¦çš„æ—¶å€™é‡æ–°è¯·æ±‚æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ•°æ®éƒ½æ˜¯æœ€æ–°çš„ã€‚ */\n  useEffect(function () {\n    var _props$form;\n    // æ‰‹åŠ¨æ¨¡å¼å’Œ request ä¸ºç©ºéƒ½ä¸ç”Ÿæ•ˆ\n    if (props.manualRequest || !props.request || !revalidateOnFocus || (_props$form = props.form) !== null && _props$form !== void 0 && _props$form.ignoreRules) return;\n\n    // èšç„¦æ—¶é‡æ–°è¯·æ±‚äº‹ä»¶\n    var visibilitychange = function visibilitychange() {\n      if (document.visibilityState === 'visible') {\n        action.reload();\n      }\n    };\n    document.addEventListener('visibilitychange', visibilitychange);\n    return function () {\n      return document.removeEventListener('visibilitychange', visibilitychange);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /** SelectedRowKeyså—æ§å¤„ç†selectRows */\n  var preserveRecordsRef = React.useRef(new Map());\n\n  // ============================ RowKey ============================\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      var _ref3;\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      }\n      // å¦‚æœ props ä¸­æœ‰name çš„è¯ï¼Œç”¨index æ¥åšè¡Œå·ï¼Œè¿™æ ·æ–¹ä¾¿è½¬åŒ–ä¸º index\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n      return (_ref3 = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _ref3 !== void 0 ? _ref3 : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  useMemo(function () {\n    var _action$dataSource;\n    if ((_action$dataSource = action.dataSource) !== null && _action$dataSource !== void 0 && _action$dataSource.length) {\n      var keys = action.dataSource.map(function (data) {\n        var dataRowKey = getRowKey(data, -1);\n        preserveRecordsRef.current.set(dataRowKey, data);\n        return dataRowKey;\n      });\n      return keys;\n    }\n    return [];\n  }, [action.dataSource, getRowKey]);\n\n  /** é¡µé¢ç¼–è¾‘çš„è®¡ç®— */\n  var pagination = useMemo(function () {\n    var newPropsPagination = propsPagination === false ? false : _objectSpread({}, propsPagination);\n    var pageConfig = _objectSpread(_objectSpread({}, action.pageInfo), {}, {\n      setPageInfo: function setPageInfo(_ref4) {\n        var pageSize = _ref4.pageSize,\n          current = _ref4.current;\n        var pageInfo = action.pageInfo;\n        // pageSize å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸”ä½ ä¸æ˜¯åœ¨ç¬¬ä¸€é¡µï¼Œåˆ‡å›åˆ°ç¬¬ä¸€é¡µ\n        // è¿™æ ·å¯ä»¥é˜²æ­¢å‡ºç° è·³è½¬åˆ°ä¸€ä¸ªç©ºçš„æ•°æ®é¡µçš„é—®é¢˜\n        if (pageSize === pageInfo.pageSize || pageInfo.current === 1) {\n          action.setPageInfo({\n            pageSize: pageSize,\n            current: current\n          });\n          return;\n        }\n\n        // é€šè¿‡requestçš„æ—¶å€™æ¸…ç©ºæ•°æ®ï¼Œç„¶ååˆ·æ–°ä¸ç„¶å¯èƒ½ä¼šå¯¼è‡´ pageSize æ²¡æœ‰æ•°æ®å¤š\n        if (request) action.setDataSource([]);\n        action.setPageInfo({\n          pageSize: pageSize,\n          // ç›®å‰åªæœ‰ List å’Œ Table æ”¯æŒåˆ†é¡µ, List æœ‰åˆ†é¡µçš„æ—¶å€™ è¿˜æ˜¯ä½¿ç”¨ä¹‹å‰çš„å½“å‰é¡µç \n          current: type === 'list' ? current : 1\n        });\n      }\n    });\n    if (request && newPropsPagination) {\n      delete newPropsPagination.onChange;\n      delete newPropsPagination.onShowSizeChange;\n    }\n    return mergePagination(newPropsPagination, pageConfig, intl);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsPagination, action, intl]);\n  useDeepCompareEffect(function () {\n    var _action$pageInfo;\n    // request å­˜åœ¨ä¸”paramsä¸ä¸ºç©ºï¼Œä¸”å·²ç»è¯·æ±‚è¿‡æ•°æ®æ‰éœ€è¦è®¾ç½®ã€‚\n    if (props.request && params && action.dataSource && (action === null || action === void 0 ? void 0 : (_action$pageInfo = action.pageInfo) === null || _action$pageInfo === void 0 ? void 0 : _action$pageInfo.current) !== 1) {\n      action.setPageInfo({\n        current: 1\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [params]);\n\n  // è®¾ç½® name åˆ° store ä¸­ï¼Œé‡Œé¢ç”¨äº† ref ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒç›´æ¥ set\n  counter.setPrefixName(props.name);\n\n  /** æ¸…ç©ºæ‰€æœ‰çš„é€‰ä¸­é¡¹ */\n  var _onCleanSelected = useCallback(function () {\n    if (propsRowSelection && propsRowSelection.onChange) {\n      propsRowSelection.onChange([], [], {\n        type: 'none'\n      });\n    }\n    setSelectedRowKeys([]);\n  }, [propsRowSelection, setSelectedRowKeys]);\n  counter.setAction(actionRef.current);\n  counter.propsRef.current = props;\n\n  /** å¯ç¼–è¾‘è¡Œçš„ç›¸å…³é…ç½® */\n  var editableUtils = useEditableArray(_objectSpread(_objectSpread({}, props.editable), {}, {\n    tableName: props.name,\n    getRowKey: getRowKey,\n    childrenColumnName: ((_props$expandable2 = props.expandable) === null || _props$expandable2 === void 0 ? void 0 : _props$expandable2.childrenColumnName) || 'children',\n    dataSource: action.dataSource || [],\n    setDataSource: function setDataSource(data) {\n      var _props$editable4, _props$editable4$onVa;\n      (_props$editable4 = props.editable) === null || _props$editable4 === void 0 ? void 0 : (_props$editable4$onVa = _props$editable4.onValuesChange) === null || _props$editable4$onVa === void 0 ? void 0 : _props$editable4$onVa.call(_props$editable4, undefined, data);\n      action.setDataSource(data);\n    }\n  }));\n\n  /** ç»‘å®š action */\n  useActionType(actionRef, action, {\n    fullScreen: function fullScreen() {\n      var _counter$rootDomRef;\n      if (!((_counter$rootDomRef = counter.rootDomRef) !== null && _counter$rootDomRef !== void 0 && _counter$rootDomRef.current) || !document.fullscreenEnabled) {\n        return;\n      }\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      } else {\n        var _counter$rootDomRef2;\n        (_counter$rootDomRef2 = counter.rootDomRef) === null || _counter$rootDomRef2 === void 0 ? void 0 : _counter$rootDomRef2.current.requestFullscreen();\n      }\n    },\n    onCleanSelected: function onCleanSelected() {\n      // æ¸…ç©ºé€‰ä¸­è¡Œ\n      _onCleanSelected();\n    },\n    resetAll: function resetAll() {\n      var _formRef$current;\n      // æ¸…ç©ºé€‰ä¸­è¡Œ\n      _onCleanSelected();\n      // æ¸…ç©ºç­›é€‰\n      setProFilter({});\n      // æ¸…ç©ºæ’åº\n      setProSort({});\n      // æ¸…ç©º toolbar æœç´¢\n      counter.setKeyWords(undefined);\n      // é‡ç½®é¡µç \n      action.setPageInfo({\n        current: 1\n      });\n\n      // é‡ç½®è¡¨å•\n      formRef === null || formRef === void 0 ? void 0 : (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n      setFormSearch({});\n    },\n    editableUtils: editableUtils\n  });\n  if (propsActionRef) {\n    // @ts-ignore\n    propsActionRef.current = actionRef.current;\n  }\n\n  // ---------- åˆ—è®¡ç®—ç›¸å…³ start  -----------------\n  var tableColumn = useMemo(function () {\n    var _props$expandable3;\n    return genProColumnToColumn({\n      columns: propsColumns,\n      counter: counter,\n      columnEmptyText: columnEmptyText,\n      type: type,\n      editableUtils: editableUtils,\n      rowKey: rowKey,\n      childrenColumnName: (_props$expandable3 = props.expandable) === null || _props$expandable3 === void 0 ? void 0 : _props$expandable3.childrenColumnName\n    }).sort(columnSort(counter.columnsMap));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsColumns, counter === null || counter === void 0 ? void 0 : counter.sortKeyColumns, counter === null || counter === void 0 ? void 0 : counter.columnsMap, columnEmptyText, type,\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  editableUtils.editableKeys && editableUtils.editableKeys.join(',')]);\n\n  /** Table Column å˜åŒ–çš„æ—¶å€™æ›´æ–°ä¸€ä¸‹ï¼Œè¿™ä¸ªå‚æ•°å°†ä¼šç”¨äºæ¸²æŸ“ */\n  useDeepCompareEffectDebounce(function () {\n    if (tableColumn && tableColumn.length > 0) {\n      // é‡æ–°ç”Ÿæˆkeyçš„å­—ç¬¦ä¸²ç”¨äºæ’åº\n      var columnKeys = tableColumn.map(function (item) {\n        return genColumnKey(item.key, item.index);\n      });\n      counter.setSortKeyColumns(columnKeys);\n    }\n  }, [tableColumn], ['render', 'renderFormItem'], 100);\n\n  /** åŒæ­¥ Paginationï¼Œæ”¯æŒå—æ§çš„ é¡µç  å’Œ pageSize */\n  useDeepCompareEffect(function () {\n    var pageInfo = action.pageInfo;\n    var _ref5 = propsPagination || {},\n      _ref5$current = _ref5.current,\n      current = _ref5$current === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current : _ref5$current,\n      _ref5$pageSize = _ref5.pageSize,\n      pageSize = _ref5$pageSize === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize : _ref5$pageSize;\n    if (propsPagination && (current || pageSize) && (pageSize !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize) || current !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current))) {\n      action.setPageInfo({\n        pageSize: pageSize || pageInfo.pageSize,\n        current: current || pageInfo.current\n      });\n    }\n  }, [propsPagination && propsPagination.pageSize, propsPagination && propsPagination.current]);\n\n  /** è¡Œé€‰æ‹©ç›¸å…³çš„é—®é¢˜ */\n  var rowSelection = _objectSpread(_objectSpread({\n    selectedRowKeys: selectedRowKeys\n  }, propsRowSelection), {}, {\n    onChange: function onChange(keys, rows, info) {\n      if (propsRowSelection && propsRowSelection.onChange) {\n        propsRowSelection.onChange(keys, rows, info);\n      }\n      setSelectedRowKeys(keys);\n    }\n  });\n\n  /** æ˜¯ä¸æ˜¯ LightFilter, LightFilter æœ‰ä¸€äº›ç‰¹æ®Šçš„å¤„ç† */\n  var isLightFilter = search !== false && (search === null || search === void 0 ? void 0 : search.filterType) === 'light';\n  var _onFormSearchSubmit = function onFormSearchSubmit(values) {\n    // åˆ¤æ–­search.onSearchè¿”å›å€¼å†³å®šæ˜¯å¦æ›´æ–°formSearch\n    if (options && options.search) {\n      var _options$search, _options$search$onSea;\n      var _ref6 = options.search === true ? {} : options.search,\n        _ref6$name = _ref6.name,\n        name = _ref6$name === void 0 ? 'keyword' : _ref6$name;\n\n      /** å¦‚æœä¼ å…¥çš„ onSearch è¿”å›å€¼ä¸º falseï¼Œåˆ™ä¸è¦æŠŠoptions.search.nameå¯¹åº”çš„å€¼setåˆ°formSearch */\n      var success = (_options$search = options.search) === null || _options$search === void 0 ? void 0 : (_options$search$onSea = _options$search.onSearch) === null || _options$search$onSea === void 0 ? void 0 : _options$search$onSea.call(_options$search, counter.keyWords);\n      if (success !== false) {\n        setFormSearch(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, counter.keyWords)));\n        return;\n      }\n    }\n    setFormSearch(values);\n  };\n  var loading = useMemo(function () {\n    if (_typeof(action.loading) === 'object') {\n      var _action$loading;\n      return ((_action$loading = action.loading) === null || _action$loading === void 0 ? void 0 : _action$loading.spinning) || false;\n    }\n    return action.loading;\n  }, [action.loading]);\n  var searchNode = search === false && type !== 'form' ? null : /*#__PURE__*/_jsx(FormRender, {\n    pagination: pagination,\n    beforeSearchSubmit: beforeSearchSubmit,\n    action: actionRef,\n    columns: propsColumns,\n    onFormSearchSubmit: function onFormSearchSubmit(values) {\n      _onFormSearchSubmit(values);\n    },\n    ghost: ghost,\n    onReset: props.onReset,\n    onSubmit: props.onSubmit,\n    loading: !!loading,\n    manualRequest: manualRequest,\n    search: search,\n    form: props.form,\n    formRef: formRef,\n    type: props.type || 'table',\n    cardBordered: props.cardBordered,\n    dateFormatter: props.dateFormatter\n  });\n  var selectedRows = useMemo(function () {\n    return selectedRowKeys === null || selectedRowKeys === void 0 ? void 0 : selectedRowKeys.map(function (key) {\n      var _preserveRecordsRef$c;\n      return (_preserveRecordsRef$c = preserveRecordsRef.current) === null || _preserveRecordsRef$c === void 0 ? void 0 : _preserveRecordsRef$c.get(key);\n    });\n  }, [selectedRowKeys]);\n\n  /** å†…ç½®çš„å·¥å…·æ  */\n  var toolbarDom = toolBarRender === false ? null : /*#__PURE__*/_jsx(Toolbar, {\n    headerTitle: headerTitle,\n    hideToolbar: options === false && !headerTitle && !toolBarRender && !toolbar && !isLightFilter,\n    selectedRows: selectedRows,\n    selectedRowKeys: selectedRowKeys,\n    tableColumn: tableColumn,\n    tooltip: tooltip,\n    toolbar: toolbar,\n    onFormSearchSubmit: function onFormSearchSubmit(newValues) {\n      setFormSearch(_objectSpread(_objectSpread({}, formSearch), newValues));\n    },\n    searchNode: isLightFilter ? searchNode : null,\n    options: options,\n    actionRef: actionRef,\n    toolBarRender: toolBarRender\n  });\n\n  /** å†…ç½®çš„å¤šé€‰æ“ä½œæ  */\n  var alertDom = propsRowSelection !== false ? /*#__PURE__*/_jsx(Alert, {\n    selectedRowKeys: selectedRowKeys,\n    selectedRows: selectedRows,\n    onCleanSelected: _onCleanSelected,\n    alertOptionRender: rest.tableAlertOptionRender,\n    alertInfoRender: tableAlertRender,\n    alwaysShowAlert: propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.alwaysShowAlert\n  }) : null;\n  return wrapSSR( /*#__PURE__*/_jsx(TableRender, _objectSpread(_objectSpread({}, props), {}, {\n    name: isEditorTable,\n    defaultClassName: defaultClassName,\n    size: counter.tableSize,\n    onSizeChange: counter.setTableSize,\n    pagination: pagination,\n    searchNode: searchNode,\n    rowSelection: propsRowSelection !== false ? rowSelection : undefined,\n    className: className,\n    tableColumn: tableColumn,\n    isLightFilter: isLightFilter,\n    action: action,\n    alertDom: alertDom,\n    toolbarDom: toolbarDom,\n    onSortChange: setProSort,\n    onFilterChange: setProFilter,\n    editableUtils: editableUtils,\n    getRowKey: getRowKey\n  })));\n};\n\n/**\n * ğŸ† Use Ant Design Table like a Pro! æ›´å¿« æ›´å¥½ æ›´æ–¹ä¾¿\n *\n * @param props\n */\nvar ProviderTableContainer = function ProviderTableContainer(props) {\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var ErrorComponent = props.ErrorBoundary === false ? React.Fragment : props.ErrorBoundary || ErrorBoundary;\n  return /*#__PURE__*/_jsx(Container, {\n    initValue: props,\n    children: /*#__PURE__*/_jsx(ProConfigProvider, {\n      needDeps: true,\n      children: /*#__PURE__*/_jsx(ErrorComponent, {\n        children: /*#__PURE__*/_jsx(ProTable, _objectSpread({\n          defaultClassName: \"\".concat(getPrefixCls('pro-table'))\n        }, props))\n      })\n    })\n  });\n};\nProviderTableContainer.Summary = Table.Summary;\nexport default ProviderTableContainer;","map":{"version":3,"names":["_regeneratorRuntime","_asyncToGenerator","_typeof","_slicedToArray","_defineProperty","_toConsumableArray","_objectSpread","_objectWithoutProperties","_excluded","_excluded2","ProCard","ProForm","ProConfigProvider","useIntl","editableRowByKey","ErrorBoundary","omitUndefined","recordKeyToString","useDeepCompareEffect","useDeepCompareEffectDebounce","useEditableArray","useMountMergeState","ConfigProvider","Table","classNames","React","useCallback","useContext","useEffect","useImperativeHandle","useMemo","useRef","stringify","Alert","FormRender","Toolbar","Container","TableContext","useStyle","useFetchData","genColumnKey","isBordered","mergePagination","parseDefaultColumnConfig","useActionType","columnSort","genProColumnToColumn","jsx","_jsx","createElement","_createElement","Fragment","_Fragment","jsxs","_jsxs","TableRender","props","rowKey","tableClassName","defaultClassName","action","tableColumns","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","searchNode","style","propsCardProps","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey","rest","counter","columns","loopFilter","column","map","item","columnKey","key","index","config","columnsMap","show","children","filter","Boolean","useLocaleFilter","every","filters","onFilter","undefined","editableDataSource","dataSource","_ref","newLineRecord","newLineOptions","row","defaultValue","parentKey","_recordKeyToString","_props$expandable","actionProps","data","map_row_parentKey","toString","recordKey","childrenColumnName","expandable","position","concat","current","pageSize","newDataSource","length","push","splice","getTableProps","isExtraColumns","extraColumn","loading","onChange","changePagination","sorter","extra","_rest$onChange","call","Array","isArray","reduce","pre","value","field","order","_sorter$column","sorterOfColumn","isSortByField","notNeedCardDom","search","headerTitle","toolBarRender","baseTableDom","tableDom","tableViewRender","tableContentDom","editable","_props$editable","_props$editable2","_props$editable2$form","_props$editable3","formProps","formRef","component","form","onValuesChange","submitter","omitNil","dateFormatter","cardBodyStyle","paddingBlockStart","padding","tableAreaDom","ghost","bordered","bodyStyle","renderTable","tableRender","toolbar","alert","table","proTableDom","pollingLoading","ref","rootDomRef","tableExtraRender","fullScreen","getPopupContainer","document","body","emptyObj","ProTable","_props$expandable2","request","propsClassName","_props$params","params","defaultData","postData","propsPagination","propsActionRef","actionRef","_props$columns","propsColumns","onLoad","onRequestError","columnsStateMap","onColumnsStateChange","isEditorTable","onLoadingChange","_props$rowSelection","propsRowSelection","beforeSearchSubmit","tableAlertRender","propRef","_props$type","_props$columnEmptyTex","columnEmptyText","manualRequest","polling","tooltip","_props$revalidateOnFo","revalidateOnFocus","_useStyle","wrapSSR","hashId","defaultFormRef","_useMountMergeState","defaultSelectedRowKeys","selectedRowKeys","_useMountMergeState2","setSelectedRowKeys","_useMountMergeState3","_useMountMergeState4","formSearch","setFormSearch","_useMountMergeState5","_useMountMergeState6","proFilter","setProFilter","_useMountMergeState7","_useMountMergeState8","proSort","setProSort","_parseDefaultColumnCo","sort","intl","fetchPagination","defaultCurrent","defaultPageSize","fetchData","_ref2","mark","_callee","pageParams","actionParams","response","wrap","_callee$","_context","prev","next","_timestamp","sent","abrupt","stop","_x","apply","arguments","pageInfo","onDataSourceChange","manual","effects","debounceTime","onPageInfoChange","_propsPagination$onCh","_propsPagination$onSh","onShowSizeChange","_props$form","ignoreRules","visibilitychange","visibilityState","reload","addEventListener","removeEventListener","preserveRecordsRef","Map","record","_ref3","_action$dataSource","keys","dataRowKey","set","newPropsPagination","pageConfig","setPageInfo","_ref4","setDataSource","_action$pageInfo","setPrefixName","_onCleanSelected","setAction","propsRef","tableName","_props$editable4","_props$editable4$onVa","_counter$rootDomRef","fullscreenEnabled","fullscreenElement","exitFullscreen","_counter$rootDomRef2","requestFullscreen","onCleanSelected","resetAll","_formRef$current","setKeyWords","resetFields","_props$expandable3","sortKeyColumns","editableKeys","join","columnKeys","setSortKeyColumns","_ref5","_ref5$current","_ref5$pageSize","rows","info","filterType","_onFormSearchSubmit","onFormSearchSubmit","values","_options$search","_options$search$onSea","_ref6","_ref6$name","success","onSearch","keyWords","_action$loading","spinning","onReset","onSubmit","selectedRows","_preserveRecordsRef$c","get","hideToolbar","newValues","alertOptionRender","tableAlertOptionRender","alertInfoRender","alwaysShowAlert","tableSize","onSizeChange","setTableSize","ProviderTableContainer","_useContext","ConfigContext","getPrefixCls","ErrorComponent","initValue","needDeps","Summary"],"sources":["D:/LearnDeveloper/ReactJS/student-management-infor/node_modules/@ant-design/pro-table/es/Table.js"],"sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"tableClassName\", \"defaultClassName\", \"action\", \"tableColumn\", \"type\", \"pagination\", \"rowSelection\", \"size\", \"defaultSize\", \"tableStyle\", \"toolbarDom\", \"searchNode\", \"style\", \"cardProps\", \"alertDom\", \"name\", \"onSortChange\", \"onFilterChange\", \"options\", \"isLightFilter\", \"className\", \"cardBordered\", \"editableUtils\", \"getRowKey\"],\n  _excluded2 = [\"cardBordered\", \"request\", \"className\", \"params\", \"defaultData\", \"headerTitle\", \"postData\", \"ghost\", \"pagination\", \"actionRef\", \"columns\", \"toolBarRender\", \"onLoad\", \"onRequestError\", \"style\", \"cardProps\", \"tableStyle\", \"tableClassName\", \"columnsStateMap\", \"onColumnsStateChange\", \"options\", \"search\", \"name\", \"onLoadingChange\", \"rowSelection\", \"beforeSearchSubmit\", \"tableAlertRender\", \"defaultClassName\", \"formRef\", \"type\", \"columnEmptyText\", \"toolbar\", \"rowKey\", \"manualRequest\", \"polling\", \"tooltip\", \"revalidateOnFocus\"];\n// å…¼å®¹ä»£ç -----------\nimport \"antd/es/table/style\";\nimport \"antd/es/typography/style\";\n//----------------------\n\nimport ProCard from '@ant-design/pro-card';\nimport ProForm from '@ant-design/pro-form';\nimport { ProConfigProvider, useIntl } from '@ant-design/pro-provider';\nimport { editableRowByKey, ErrorBoundary, omitUndefined, recordKeyToString, useDeepCompareEffect, useDeepCompareEffectDebounce, useEditableArray, useMountMergeState } from '@ant-design/pro-utils';\nimport { ConfigProvider, Table } from 'antd';\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport Alert from \"./components/Alert\";\nimport FormRender from \"./components/Form\";\nimport Toolbar from \"./components/ToolBar\";\nimport { Container, TableContext } from \"./Store/Provide\";\nimport { useStyle } from \"./style\";\nimport useFetchData from \"./useFetchData\";\nimport { genColumnKey, isBordered, mergePagination, parseDefaultColumnConfig, useActionType } from \"./utils\";\nimport { columnSort } from \"./utils/columnSort\";\nimport { genProColumnToColumn } from \"./utils/genProColumnToColumn\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction TableRender(props) {\n  var rowKey = props.rowKey,\n    tableClassName = props.tableClassName,\n    defaultClassName = props.defaultClassName,\n    action = props.action,\n    tableColumns = props.tableColumn,\n    type = props.type,\n    pagination = props.pagination,\n    rowSelection = props.rowSelection,\n    size = props.size,\n    defaultSize = props.defaultSize,\n    tableStyle = props.tableStyle,\n    toolbarDom = props.toolbarDom,\n    searchNode = props.searchNode,\n    style = props.style,\n    propsCardProps = props.cardProps,\n    alertDom = props.alertDom,\n    name = props.name,\n    onSortChange = props.onSortChange,\n    onFilterChange = props.onFilterChange,\n    options = props.options,\n    isLightFilter = props.isLightFilter,\n    className = props.className,\n    cardBordered = props.cardBordered,\n    editableUtils = props.editableUtils,\n    getRowKey = props.getRowKey,\n    rest = _objectWithoutProperties(props, _excluded);\n  var counter = useContext(TableContext);\n\n  /** éœ€è¦éå†ä¸€ä¸‹ï¼Œä¸ç„¶ä¸æ”¯æŒåµŒå¥—è¡¨æ ¼ */\n  var columns = useMemo(function () {\n    var loopFilter = function loopFilter(column) {\n      return column.map(function (item) {\n        // åˆ æ‰ä¸åº”è¯¥æ˜¾ç¤ºçš„\n        var columnKey = genColumnKey(item.key, item.index);\n        var config = counter.columnsMap[columnKey];\n        if (config && config.show === false) {\n          return false;\n        }\n        if (item.children) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            children: loopFilter(item.children)\n          });\n        }\n        return item;\n      }).filter(Boolean);\n    };\n    return loopFilter(tableColumns);\n  }, [counter.columnsMap, tableColumns]);\n\n  /** å¦‚æœæ‰€æœ‰åˆ—ä¸­çš„ filters=true| undefined è¯´æ˜æ˜¯ç”¨çš„æ˜¯æœ¬åœ°ç­›é€‰ ä»»ä½•ä¸€åˆ—é…ç½® filters=falseï¼Œå°±èƒ½ç»•è¿‡è¿™ä¸ªåˆ¤æ–­ */\n  var useLocaleFilter = useMemo(function () {\n    return columns === null || columns === void 0 ? void 0 : columns.every(function (column) {\n      return column.filters === true && column.onFilter === true || column.filters === undefined && column.onFilter === undefined;\n    });\n  }, [columns]);\n\n  /**\n   * å¦‚æœæ˜¯åˆ†é¡µçš„æ–°å¢ï¼Œæ€»æ˜¯åŠ åˆ°æœ€åä¸€è¡Œ\n   *\n   * @returns\n   */\n  var editableDataSource = function editableDataSource(dataSource) {\n    var _ref = editableUtils.newLineRecord || {},\n      newLineOptions = _ref.options,\n      row = _ref.defaultValue;\n    if (newLineOptions !== null && newLineOptions !== void 0 && newLineOptions.parentKey) {\n      var _recordKeyToString, _props$expandable;\n      var actionProps = {\n        data: dataSource,\n        getRowKey: getRowKey,\n        row: _objectSpread(_objectSpread({}, row), {}, {\n          map_row_parentKey: (_recordKeyToString = recordKeyToString(newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.parentKey)) === null || _recordKeyToString === void 0 ? void 0 : _recordKeyToString.toString()\n        }),\n        key: newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.recordKey,\n        childrenColumnName: ((_props$expandable = props.expandable) === null || _props$expandable === void 0 ? void 0 : _props$expandable.childrenColumnName) || 'children'\n      };\n      return editableRowByKey(actionProps, newLineOptions.position === 'top' ? 'top' : 'update');\n    }\n    if ((newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.position) === 'top') {\n      return [row].concat(_toConsumableArray(action.dataSource));\n    }\n    // å¦‚æœæœ‰åˆ†é¡µçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åŠ åˆ°è¿™ä¸€é¡µçš„æœ«å°¾\n    if (pagination && pagination !== null && pagination !== void 0 && pagination.current && pagination !== null && pagination !== void 0 && pagination.pageSize) {\n      var newDataSource = _toConsumableArray(action.dataSource);\n      if ((pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) > newDataSource.length) {\n        newDataSource.push(row);\n        return newDataSource;\n      }\n      newDataSource.splice((pagination === null || pagination === void 0 ? void 0 : pagination.current) * (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) - 1, 0, row);\n      return newDataSource;\n    }\n    return [].concat(_toConsumableArray(action.dataSource), [row]);\n  };\n  var getTableProps = function getTableProps() {\n    return _objectSpread(_objectSpread({}, rest), {}, {\n      size: size,\n      rowSelection: rowSelection === false ? undefined : rowSelection,\n      className: tableClassName,\n      style: tableStyle,\n      columns: columns.map(function (item) {\n        return item.isExtraColumns ? item.extraColumn : item;\n      }),\n      loading: action.loading,\n      dataSource: editableUtils.newLineRecord ? editableDataSource(action.dataSource) : action.dataSource,\n      pagination: pagination,\n      onChange: function onChange(changePagination, filters, sorter, extra) {\n        var _rest$onChange;\n        (_rest$onChange = rest.onChange) === null || _rest$onChange === void 0 ? void 0 : _rest$onChange.call(rest, changePagination, filters, sorter, extra);\n        if (!useLocaleFilter) {\n          onFilterChange(omitUndefined(filters));\n        }\n        // åˆ¶é€ ç­›é€‰çš„æ•°æ®\n        // åˆ¶é€ ä¸€ä¸ªæ’åºçš„æ•°æ®\n        if (Array.isArray(sorter)) {\n          var data = sorter.reduce(function (pre, value) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, \"\".concat(value.field), value.order));\n          }, {});\n          onSortChange(omitUndefined(data));\n        } else {\n          var _sorter$column;\n          var sorterOfColumn = (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter;\n          var isSortByField = (sorterOfColumn === null || sorterOfColumn === void 0 ? void 0 : sorterOfColumn.toString()) === sorterOfColumn;\n          onSortChange(omitUndefined(_defineProperty({}, \"\".concat(isSortByField ? sorterOfColumn : sorter.field), sorter.order)) || {});\n        }\n      }\n    });\n  };\n\n  /**\n   * æ˜¯å¦éœ€è¦ card æ¥åŒ…è£¹\n   */\n  var notNeedCardDom = useMemo(function () {\n    if (props.search === false && !props.headerTitle && props.toolBarRender === false) {\n      return true;\n    }\n    return false;\n  }, []);\n\n  /** é»˜è®¤çš„ table domï¼Œå¦‚æœæ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œå¤–é¢è¿˜è¦åŒ…ä¸ª form */\n  var baseTableDom = /*#__PURE__*/_jsx(Table, _objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowKey: rowKey\n  }));\n\n  /** è‡ªå®šä¹‰çš„ render */\n  var tableDom = props.tableViewRender ? props.tableViewRender(_objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowSelection: rowSelection !== false ? rowSelection : undefined\n  }), baseTableDom) : baseTableDom;\n  var tableContentDom = useMemo(function () {\n    if (props.editable && !props.name) {\n      var _props$editable, _props$editable2, _props$editable2$form, _props$editable3;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [toolbarDom, alertDom, /*#__PURE__*/_createElement(ProForm, _objectSpread(_objectSpread({}, (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.formProps), {}, {\n          formRef: (_props$editable2 = props.editable) === null || _props$editable2 === void 0 ? void 0 : (_props$editable2$form = _props$editable2.formProps) === null || _props$editable2$form === void 0 ? void 0 : _props$editable2$form.formRef,\n          component: false,\n          form: (_props$editable3 = props.editable) === null || _props$editable3 === void 0 ? void 0 : _props$editable3.form,\n          onValuesChange: editableUtils.onValuesChange,\n          key: \"table\",\n          submitter: false,\n          omitNil: false,\n          dateFormatter: props.dateFormatter\n        }), tableDom)]\n      });\n    }\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [toolbarDom, alertDom, tableDom]\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertDom, props.loading, !!props.editable, tableDom, toolbarDom]);\n  var cardBodyStyle = useMemo(function () {\n    if (propsCardProps === false || notNeedCardDom === true || !!props.name) return {};\n    if (toolbarDom) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    if (toolbarDom && pagination === false) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    if (!toolbarDom) {\n      return {\n        padding: 0\n      };\n    }\n    return {};\n  }, [notNeedCardDom, pagination, props.name, propsCardProps, toolbarDom]);\n\n  /** Table åŒºåŸŸçš„ domï¼Œä¸ºäº†æ–¹ä¾¿ render */\n  var tableAreaDom =\n  // cardProps æˆ–è€… æœ‰äº†name å°±ä¸éœ€è¦è¿™ä¸ªpaddingäº†ï¼Œä¸ç„¶ä¼šå¯¼è‡´ä¸å¥½å¯¹é½\n  propsCardProps === false || notNeedCardDom === true || !!props.name ? tableContentDom : /*#__PURE__*/_jsx(ProCard, _objectSpread(_objectSpread({\n    ghost: props.ghost,\n    bordered: isBordered('table', cardBordered),\n    bodyStyle: cardBodyStyle\n  }, propsCardProps), {}, {\n    children: tableContentDom\n  }));\n  var renderTable = function renderTable() {\n    if (props.tableRender) {\n      return props.tableRender(props, tableAreaDom, {\n        toolbar: toolbarDom || undefined,\n        alert: alertDom || undefined,\n        table: tableDom || undefined\n      });\n    }\n    return tableAreaDom;\n  };\n  var proTableDom = /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(defaultClassName, \"-polling\"), action.pollingLoading)),\n    style: style,\n    ref: counter.rootDomRef,\n    children: [isLightFilter ? null : searchNode, type !== 'form' && props.tableExtraRender && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames(className, \"\".concat(defaultClassName, \"-extra\")),\n      children: props.tableExtraRender(props, action.dataSource || [])\n    }), type !== 'form' && renderTable()]\n  });\n\n  // å¦‚æœä¸éœ€è¦çš„å…¨å±ï¼ŒConfigProvider æ²¡æœ‰æ„ä¹‰\n  if (!options || !(options !== null && options !== void 0 && options.fullScreen)) {\n    return proTableDom;\n  }\n  return /*#__PURE__*/_jsx(ConfigProvider, {\n    getPopupContainer: function getPopupContainer() {\n      return counter.rootDomRef.current || document.body;\n    },\n    children: proTableDom\n  });\n}\nvar emptyObj = {};\nvar ProTable = function ProTable(props) {\n  var _props$expandable2;\n  var cardBordered = props.cardBordered,\n    request = props.request,\n    propsClassName = props.className,\n    _props$params = props.params,\n    params = _props$params === void 0 ? emptyObj : _props$params,\n    defaultData = props.defaultData,\n    headerTitle = props.headerTitle,\n    postData = props.postData,\n    ghost = props.ghost,\n    propsPagination = props.pagination,\n    propsActionRef = props.actionRef,\n    _props$columns = props.columns,\n    propsColumns = _props$columns === void 0 ? [] : _props$columns,\n    toolBarRender = props.toolBarRender,\n    onLoad = props.onLoad,\n    onRequestError = props.onRequestError,\n    style = props.style,\n    cardProps = props.cardProps,\n    tableStyle = props.tableStyle,\n    tableClassName = props.tableClassName,\n    columnsStateMap = props.columnsStateMap,\n    onColumnsStateChange = props.onColumnsStateChange,\n    options = props.options,\n    search = props.search,\n    isEditorTable = props.name,\n    onLoadingChange = props.onLoadingChange,\n    _props$rowSelection = props.rowSelection,\n    propsRowSelection = _props$rowSelection === void 0 ? false : _props$rowSelection,\n    beforeSearchSubmit = props.beforeSearchSubmit,\n    tableAlertRender = props.tableAlertRender,\n    defaultClassName = props.defaultClassName,\n    propRef = props.formRef,\n    _props$type = props.type,\n    type = _props$type === void 0 ? 'table' : _props$type,\n    _props$columnEmptyTex = props.columnEmptyText,\n    columnEmptyText = _props$columnEmptyTex === void 0 ? '-' : _props$columnEmptyTex,\n    toolbar = props.toolbar,\n    rowKey = props.rowKey,\n    manualRequest = props.manualRequest,\n    polling = props.polling,\n    tooltip = props.tooltip,\n    _props$revalidateOnFo = props.revalidateOnFocus,\n    revalidateOnFocus = _props$revalidateOnFo === void 0 ? false : _props$revalidateOnFo,\n    rest = _objectWithoutProperties(props, _excluded2);\n  var _useStyle = useStyle(props.defaultClassName),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  var className = classNames(defaultClassName, propsClassName, hashId);\n\n  /** é€šç”¨çš„æ¥æ“ä½œå­èŠ‚ç‚¹çš„å·¥å…·ç±» */\n  var actionRef = useRef();\n  var defaultFormRef = useRef();\n  var formRef = propRef || defaultFormRef;\n  useImperativeHandle(propsActionRef, function () {\n    return actionRef.current;\n  });\n\n  /** å•é€‰å¤šé€‰çš„ç›¸å…³é€»è¾‘ */\n  var _useMountMergeState = useMountMergeState(propsRowSelection ? (propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.defaultSelectedRowKeys) || [] : undefined, {\n      value: propsRowSelection ? propsRowSelection.selectedRowKeys : undefined\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    selectedRowKeys = _useMountMergeState2[0],\n    setSelectedRowKeys = _useMountMergeState2[1];\n  var _useMountMergeState3 = useMountMergeState(function () {\n      // å¦‚æœæ‰‹åŠ¨æ¨¡å¼ï¼Œæˆ–è€… search ä¸å­˜åœ¨çš„æ—¶å€™è®¾ç½®ä¸º undefined\n      // undefined å°±ä¸ä¼šè§¦å‘é¦–æ¬¡åŠ è½½\n      if (manualRequest || search !== false) {\n        return undefined;\n      }\n      return {};\n    }),\n    _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n    formSearch = _useMountMergeState4[0],\n    setFormSearch = _useMountMergeState4[1];\n  var _useMountMergeState5 = useMountMergeState({}),\n    _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n    proFilter = _useMountMergeState6[0],\n    setProFilter = _useMountMergeState6[1];\n  var _useMountMergeState7 = useMountMergeState({}),\n    _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n    proSort = _useMountMergeState8[0],\n    setProSort = _useMountMergeState8[1];\n\n  /** è®¾ç½®é»˜è®¤æ’åºå’Œç­›é€‰å€¼ */\n  useEffect(function () {\n    var _parseDefaultColumnCo = parseDefaultColumnConfig(propsColumns),\n      sort = _parseDefaultColumnCo.sort,\n      filter = _parseDefaultColumnCo.filter;\n    setProFilter(filter);\n    setProSort(sort);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var intl = useIntl();\n\n  /** éœ€è¦åˆå§‹åŒ– ä¸ç„¶é»˜è®¤å¯èƒ½æŠ¥é”™ è¿™é‡Œå–äº† defaultCurrent å’Œ current ä¸ºäº†ä¿è¯ä¸ä¼šé‡å¤åˆ·æ–° */\n  var fetchPagination = _typeof(propsPagination) === 'object' ? propsPagination : {\n    defaultCurrent: 1,\n    defaultPageSize: 20,\n    pageSize: 20,\n    current: 1\n  };\n  var counter = useContext(TableContext);\n\n  // ============================ useFetchData ============================\n  var fetchData = useMemo(function () {\n    if (!request) return undefined;\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageParams) {\n        var actionParams, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              actionParams = _objectSpread(_objectSpread(_objectSpread({}, pageParams || {}), formSearch), params); // eslint-disable-next-line no-underscore-dangle\n              delete actionParams._timestamp;\n              _context.next = 4;\n              return request(actionParams, proSort, proFilter);\n            case 4:\n              response = _context.sent;\n              return _context.abrupt(\"return\", response);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }, [formSearch, params, proFilter, proSort, request]);\n  var action = useFetchData(fetchData, defaultData, {\n    pageInfo: propsPagination === false ? false : fetchPagination,\n    loading: props.loading,\n    dataSource: props.dataSource,\n    onDataSourceChange: props.onDataSourceChange,\n    onLoad: onLoad,\n    onLoadingChange: onLoadingChange,\n    onRequestError: onRequestError,\n    postData: postData,\n    revalidateOnFocus: revalidateOnFocus,\n    manual: formSearch === undefined,\n    polling: polling,\n    effects: [stringify(params), stringify(formSearch), stringify(proFilter), stringify(proSort)],\n    debounceTime: props.debounceTime,\n    onPageInfoChange: function onPageInfoChange(pageInfo) {\n      var _propsPagination$onCh, _propsPagination$onSh;\n      if (type === 'list' || !propsPagination || !fetchData) return;\n\n      // æ€»æ˜¯è§¦å‘ä¸€ä¸‹ onChange å’Œ  onShowSizeChange\n      // ç›®å‰åªæœ‰ List å’Œ Table æ”¯æŒåˆ†é¡µ, List æœ‰åˆ†é¡µçš„æ—¶å€™æ‰“æ–­ Table çš„åˆ†é¡µ\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onCh = propsPagination.onChange) === null || _propsPagination$onCh === void 0 ? void 0 : _propsPagination$onCh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onSh = propsPagination.onShowSizeChange) === null || _propsPagination$onSh === void 0 ? void 0 : _propsPagination$onSh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n    }\n  });\n  // ============================ END ============================\n\n  /** é»˜è®¤èšç„¦çš„æ—¶å€™é‡æ–°è¯·æ±‚æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ•°æ®éƒ½æ˜¯æœ€æ–°çš„ã€‚ */\n  useEffect(function () {\n    var _props$form;\n    // æ‰‹åŠ¨æ¨¡å¼å’Œ request ä¸ºç©ºéƒ½ä¸ç”Ÿæ•ˆ\n    if (props.manualRequest || !props.request || !revalidateOnFocus || (_props$form = props.form) !== null && _props$form !== void 0 && _props$form.ignoreRules) return;\n\n    // èšç„¦æ—¶é‡æ–°è¯·æ±‚äº‹ä»¶\n    var visibilitychange = function visibilitychange() {\n      if (document.visibilityState === 'visible') {\n        action.reload();\n      }\n    };\n    document.addEventListener('visibilitychange', visibilitychange);\n    return function () {\n      return document.removeEventListener('visibilitychange', visibilitychange);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /** SelectedRowKeyså—æ§å¤„ç†selectRows */\n  var preserveRecordsRef = React.useRef(new Map());\n\n  // ============================ RowKey ============================\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      var _ref3;\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      }\n      // å¦‚æœ props ä¸­æœ‰name çš„è¯ï¼Œç”¨index æ¥åšè¡Œå·ï¼Œè¿™æ ·æ–¹ä¾¿è½¬åŒ–ä¸º index\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n      return (_ref3 = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _ref3 !== void 0 ? _ref3 : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  useMemo(function () {\n    var _action$dataSource;\n    if ((_action$dataSource = action.dataSource) !== null && _action$dataSource !== void 0 && _action$dataSource.length) {\n      var keys = action.dataSource.map(function (data) {\n        var dataRowKey = getRowKey(data, -1);\n        preserveRecordsRef.current.set(dataRowKey, data);\n        return dataRowKey;\n      });\n      return keys;\n    }\n    return [];\n  }, [action.dataSource, getRowKey]);\n\n  /** é¡µé¢ç¼–è¾‘çš„è®¡ç®— */\n  var pagination = useMemo(function () {\n    var newPropsPagination = propsPagination === false ? false : _objectSpread({}, propsPagination);\n    var pageConfig = _objectSpread(_objectSpread({}, action.pageInfo), {}, {\n      setPageInfo: function setPageInfo(_ref4) {\n        var pageSize = _ref4.pageSize,\n          current = _ref4.current;\n        var pageInfo = action.pageInfo;\n        // pageSize å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸”ä½ ä¸æ˜¯åœ¨ç¬¬ä¸€é¡µï¼Œåˆ‡å›åˆ°ç¬¬ä¸€é¡µ\n        // è¿™æ ·å¯ä»¥é˜²æ­¢å‡ºç° è·³è½¬åˆ°ä¸€ä¸ªç©ºçš„æ•°æ®é¡µçš„é—®é¢˜\n        if (pageSize === pageInfo.pageSize || pageInfo.current === 1) {\n          action.setPageInfo({\n            pageSize: pageSize,\n            current: current\n          });\n          return;\n        }\n\n        // é€šè¿‡requestçš„æ—¶å€™æ¸…ç©ºæ•°æ®ï¼Œç„¶ååˆ·æ–°ä¸ç„¶å¯èƒ½ä¼šå¯¼è‡´ pageSize æ²¡æœ‰æ•°æ®å¤š\n        if (request) action.setDataSource([]);\n        action.setPageInfo({\n          pageSize: pageSize,\n          // ç›®å‰åªæœ‰ List å’Œ Table æ”¯æŒåˆ†é¡µ, List æœ‰åˆ†é¡µçš„æ—¶å€™ è¿˜æ˜¯ä½¿ç”¨ä¹‹å‰çš„å½“å‰é¡µç \n          current: type === 'list' ? current : 1\n        });\n      }\n    });\n    if (request && newPropsPagination) {\n      delete newPropsPagination.onChange;\n      delete newPropsPagination.onShowSizeChange;\n    }\n    return mergePagination(newPropsPagination, pageConfig, intl);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsPagination, action, intl]);\n  useDeepCompareEffect(function () {\n    var _action$pageInfo;\n    // request å­˜åœ¨ä¸”paramsä¸ä¸ºç©ºï¼Œä¸”å·²ç»è¯·æ±‚è¿‡æ•°æ®æ‰éœ€è¦è®¾ç½®ã€‚\n    if (props.request && params && action.dataSource && (action === null || action === void 0 ? void 0 : (_action$pageInfo = action.pageInfo) === null || _action$pageInfo === void 0 ? void 0 : _action$pageInfo.current) !== 1) {\n      action.setPageInfo({\n        current: 1\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [params]);\n\n  // è®¾ç½® name åˆ° store ä¸­ï¼Œé‡Œé¢ç”¨äº† ref ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒç›´æ¥ set\n  counter.setPrefixName(props.name);\n\n  /** æ¸…ç©ºæ‰€æœ‰çš„é€‰ä¸­é¡¹ */\n  var _onCleanSelected = useCallback(function () {\n    if (propsRowSelection && propsRowSelection.onChange) {\n      propsRowSelection.onChange([], [], {\n        type: 'none'\n      });\n    }\n    setSelectedRowKeys([]);\n  }, [propsRowSelection, setSelectedRowKeys]);\n  counter.setAction(actionRef.current);\n  counter.propsRef.current = props;\n\n  /** å¯ç¼–è¾‘è¡Œçš„ç›¸å…³é…ç½® */\n  var editableUtils = useEditableArray(_objectSpread(_objectSpread({}, props.editable), {}, {\n    tableName: props.name,\n    getRowKey: getRowKey,\n    childrenColumnName: ((_props$expandable2 = props.expandable) === null || _props$expandable2 === void 0 ? void 0 : _props$expandable2.childrenColumnName) || 'children',\n    dataSource: action.dataSource || [],\n    setDataSource: function setDataSource(data) {\n      var _props$editable4, _props$editable4$onVa;\n      (_props$editable4 = props.editable) === null || _props$editable4 === void 0 ? void 0 : (_props$editable4$onVa = _props$editable4.onValuesChange) === null || _props$editable4$onVa === void 0 ? void 0 : _props$editable4$onVa.call(_props$editable4, undefined, data);\n      action.setDataSource(data);\n    }\n  }));\n\n  /** ç»‘å®š action */\n  useActionType(actionRef, action, {\n    fullScreen: function fullScreen() {\n      var _counter$rootDomRef;\n      if (!((_counter$rootDomRef = counter.rootDomRef) !== null && _counter$rootDomRef !== void 0 && _counter$rootDomRef.current) || !document.fullscreenEnabled) {\n        return;\n      }\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      } else {\n        var _counter$rootDomRef2;\n        (_counter$rootDomRef2 = counter.rootDomRef) === null || _counter$rootDomRef2 === void 0 ? void 0 : _counter$rootDomRef2.current.requestFullscreen();\n      }\n    },\n    onCleanSelected: function onCleanSelected() {\n      // æ¸…ç©ºé€‰ä¸­è¡Œ\n      _onCleanSelected();\n    },\n    resetAll: function resetAll() {\n      var _formRef$current;\n      // æ¸…ç©ºé€‰ä¸­è¡Œ\n      _onCleanSelected();\n      // æ¸…ç©ºç­›é€‰\n      setProFilter({});\n      // æ¸…ç©ºæ’åº\n      setProSort({});\n      // æ¸…ç©º toolbar æœç´¢\n      counter.setKeyWords(undefined);\n      // é‡ç½®é¡µç \n      action.setPageInfo({\n        current: 1\n      });\n\n      // é‡ç½®è¡¨å•\n      formRef === null || formRef === void 0 ? void 0 : (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n      setFormSearch({});\n    },\n    editableUtils: editableUtils\n  });\n  if (propsActionRef) {\n    // @ts-ignore\n    propsActionRef.current = actionRef.current;\n  }\n\n  // ---------- åˆ—è®¡ç®—ç›¸å…³ start  -----------------\n  var tableColumn = useMemo(function () {\n    var _props$expandable3;\n    return genProColumnToColumn({\n      columns: propsColumns,\n      counter: counter,\n      columnEmptyText: columnEmptyText,\n      type: type,\n      editableUtils: editableUtils,\n      rowKey: rowKey,\n      childrenColumnName: (_props$expandable3 = props.expandable) === null || _props$expandable3 === void 0 ? void 0 : _props$expandable3.childrenColumnName\n    }).sort(columnSort(counter.columnsMap));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsColumns, counter === null || counter === void 0 ? void 0 : counter.sortKeyColumns, counter === null || counter === void 0 ? void 0 : counter.columnsMap, columnEmptyText, type,\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  editableUtils.editableKeys && editableUtils.editableKeys.join(',')]);\n\n  /** Table Column å˜åŒ–çš„æ—¶å€™æ›´æ–°ä¸€ä¸‹ï¼Œè¿™ä¸ªå‚æ•°å°†ä¼šç”¨äºæ¸²æŸ“ */\n  useDeepCompareEffectDebounce(function () {\n    if (tableColumn && tableColumn.length > 0) {\n      // é‡æ–°ç”Ÿæˆkeyçš„å­—ç¬¦ä¸²ç”¨äºæ’åº\n      var columnKeys = tableColumn.map(function (item) {\n        return genColumnKey(item.key, item.index);\n      });\n      counter.setSortKeyColumns(columnKeys);\n    }\n  }, [tableColumn], ['render', 'renderFormItem'], 100);\n\n  /** åŒæ­¥ Paginationï¼Œæ”¯æŒå—æ§çš„ é¡µç  å’Œ pageSize */\n  useDeepCompareEffect(function () {\n    var pageInfo = action.pageInfo;\n    var _ref5 = propsPagination || {},\n      _ref5$current = _ref5.current,\n      current = _ref5$current === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current : _ref5$current,\n      _ref5$pageSize = _ref5.pageSize,\n      pageSize = _ref5$pageSize === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize : _ref5$pageSize;\n    if (propsPagination && (current || pageSize) && (pageSize !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize) || current !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current))) {\n      action.setPageInfo({\n        pageSize: pageSize || pageInfo.pageSize,\n        current: current || pageInfo.current\n      });\n    }\n  }, [propsPagination && propsPagination.pageSize, propsPagination && propsPagination.current]);\n\n  /** è¡Œé€‰æ‹©ç›¸å…³çš„é—®é¢˜ */\n  var rowSelection = _objectSpread(_objectSpread({\n    selectedRowKeys: selectedRowKeys\n  }, propsRowSelection), {}, {\n    onChange: function onChange(keys, rows, info) {\n      if (propsRowSelection && propsRowSelection.onChange) {\n        propsRowSelection.onChange(keys, rows, info);\n      }\n      setSelectedRowKeys(keys);\n    }\n  });\n\n  /** æ˜¯ä¸æ˜¯ LightFilter, LightFilter æœ‰ä¸€äº›ç‰¹æ®Šçš„å¤„ç† */\n  var isLightFilter = search !== false && (search === null || search === void 0 ? void 0 : search.filterType) === 'light';\n  var _onFormSearchSubmit = function onFormSearchSubmit(values) {\n    // åˆ¤æ–­search.onSearchè¿”å›å€¼å†³å®šæ˜¯å¦æ›´æ–°formSearch\n    if (options && options.search) {\n      var _options$search, _options$search$onSea;\n      var _ref6 = options.search === true ? {} : options.search,\n        _ref6$name = _ref6.name,\n        name = _ref6$name === void 0 ? 'keyword' : _ref6$name;\n\n      /** å¦‚æœä¼ å…¥çš„ onSearch è¿”å›å€¼ä¸º falseï¼Œåˆ™ä¸è¦æŠŠoptions.search.nameå¯¹åº”çš„å€¼setåˆ°formSearch */\n      var success = (_options$search = options.search) === null || _options$search === void 0 ? void 0 : (_options$search$onSea = _options$search.onSearch) === null || _options$search$onSea === void 0 ? void 0 : _options$search$onSea.call(_options$search, counter.keyWords);\n      if (success !== false) {\n        setFormSearch(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, counter.keyWords)));\n        return;\n      }\n    }\n    setFormSearch(values);\n  };\n  var loading = useMemo(function () {\n    if (_typeof(action.loading) === 'object') {\n      var _action$loading;\n      return ((_action$loading = action.loading) === null || _action$loading === void 0 ? void 0 : _action$loading.spinning) || false;\n    }\n    return action.loading;\n  }, [action.loading]);\n  var searchNode = search === false && type !== 'form' ? null : /*#__PURE__*/_jsx(FormRender, {\n    pagination: pagination,\n    beforeSearchSubmit: beforeSearchSubmit,\n    action: actionRef,\n    columns: propsColumns,\n    onFormSearchSubmit: function onFormSearchSubmit(values) {\n      _onFormSearchSubmit(values);\n    },\n    ghost: ghost,\n    onReset: props.onReset,\n    onSubmit: props.onSubmit,\n    loading: !!loading,\n    manualRequest: manualRequest,\n    search: search,\n    form: props.form,\n    formRef: formRef,\n    type: props.type || 'table',\n    cardBordered: props.cardBordered,\n    dateFormatter: props.dateFormatter\n  });\n  var selectedRows = useMemo(function () {\n    return selectedRowKeys === null || selectedRowKeys === void 0 ? void 0 : selectedRowKeys.map(function (key) {\n      var _preserveRecordsRef$c;\n      return (_preserveRecordsRef$c = preserveRecordsRef.current) === null || _preserveRecordsRef$c === void 0 ? void 0 : _preserveRecordsRef$c.get(key);\n    });\n  }, [selectedRowKeys]);\n\n  /** å†…ç½®çš„å·¥å…·æ  */\n  var toolbarDom = toolBarRender === false ? null : /*#__PURE__*/_jsx(Toolbar, {\n    headerTitle: headerTitle,\n    hideToolbar: options === false && !headerTitle && !toolBarRender && !toolbar && !isLightFilter,\n    selectedRows: selectedRows,\n    selectedRowKeys: selectedRowKeys,\n    tableColumn: tableColumn,\n    tooltip: tooltip,\n    toolbar: toolbar,\n    onFormSearchSubmit: function onFormSearchSubmit(newValues) {\n      setFormSearch(_objectSpread(_objectSpread({}, formSearch), newValues));\n    },\n    searchNode: isLightFilter ? searchNode : null,\n    options: options,\n    actionRef: actionRef,\n    toolBarRender: toolBarRender\n  });\n\n  /** å†…ç½®çš„å¤šé€‰æ“ä½œæ  */\n  var alertDom = propsRowSelection !== false ? /*#__PURE__*/_jsx(Alert, {\n    selectedRowKeys: selectedRowKeys,\n    selectedRows: selectedRows,\n    onCleanSelected: _onCleanSelected,\n    alertOptionRender: rest.tableAlertOptionRender,\n    alertInfoRender: tableAlertRender,\n    alwaysShowAlert: propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.alwaysShowAlert\n  }) : null;\n  return wrapSSR( /*#__PURE__*/_jsx(TableRender, _objectSpread(_objectSpread({}, props), {}, {\n    name: isEditorTable,\n    defaultClassName: defaultClassName,\n    size: counter.tableSize,\n    onSizeChange: counter.setTableSize,\n    pagination: pagination,\n    searchNode: searchNode,\n    rowSelection: propsRowSelection !== false ? rowSelection : undefined,\n    className: className,\n    tableColumn: tableColumn,\n    isLightFilter: isLightFilter,\n    action: action,\n    alertDom: alertDom,\n    toolbarDom: toolbarDom,\n    onSortChange: setProSort,\n    onFilterChange: setProFilter,\n    editableUtils: editableUtils,\n    getRowKey: getRowKey\n  })));\n};\n\n/**\n * ğŸ† Use Ant Design Table like a Pro! æ›´å¿« æ›´å¥½ æ›´æ–¹ä¾¿\n *\n * @param props\n */\nvar ProviderTableContainer = function ProviderTableContainer(props) {\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var ErrorComponent = props.ErrorBoundary === false ? React.Fragment : props.ErrorBoundary || ErrorBoundary;\n  return /*#__PURE__*/_jsx(Container, {\n    initValue: props,\n    children: /*#__PURE__*/_jsx(ProConfigProvider, {\n      needDeps: true,\n      children: /*#__PURE__*/_jsx(ErrorComponent, {\n        children: /*#__PURE__*/_jsx(ProTable, _objectSpread({\n          defaultClassName: \"\".concat(getPrefixCls('pro-table'))\n        }, props))\n      })\n    })\n  });\n};\nProviderTableContainer.Summary = Table.Summary;\nexport default ProviderTableContainer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}