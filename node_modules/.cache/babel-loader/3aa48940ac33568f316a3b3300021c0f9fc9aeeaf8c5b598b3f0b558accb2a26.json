{"ast":null,"code":"import _regeneratorRuntime from\"D:/LearnDeveloper/ReactJS/student_manage_infor/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"D:/LearnDeveloper/ReactJS/student_manage_infor/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"D:/LearnDeveloper/ReactJS/student_manage_infor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/LearnDeveloper/ReactJS/student_manage_infor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"D:/LearnDeveloper/ReactJS/student_manage_infor/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"D:/LearnDeveloper/ReactJS/student_manage_infor/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"editing\",\"dataIndex\",\"title\",\"inputType\",\"record\",\"index\",\"children\"];import React,{useState}from\"react\";import\"./index.css\";import{Form,Input,InputNumber,Popconfirm,Table,Typography}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var originData=[];for(var i=0;i<100;i++){originData.push({key:i.toString(),name:\"Edward \".concat(i),age:32,address:\"London Park no. \".concat(i)});}var EditableCell=function EditableCell(_ref){var editing=_ref.editing,dataIndex=_ref.dataIndex,title=_ref.title,inputType=_ref.inputType,record=_ref.record,index=_ref.index,children=_ref.children,restProps=_objectWithoutProperties(_ref,_excluded);var inputNode=inputType===\"number\"?/*#__PURE__*/_jsx(InputNumber,{}):/*#__PURE__*/_jsx(Input,{});return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},restProps),{},{children:editing?/*#__PURE__*/_jsx(Form.Item,{name:dataIndex,style:{margin:0},rules:[{required:true,message:\"Please Input \".concat(title,\"!\")}],children:inputNode}):children}));};var Content=function Content(){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState(originData),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),editingKey=_useState4[0],setEditingKey=_useState4[1];var isEditing=function isEditing(record){return record.key===editingKey;};var edit=function edit(record){form.setFieldsValue(_objectSpread({name:\"\",age:\"\",address:\"\"},record));setEditingKey(record.key);};var cancel=function cancel(){setEditingKey(\"\");};var save=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(key){var row,newData,index,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return form.validateFields();case 3:row=_context.sent;newData=_toConsumableArray(data);index=newData.findIndex(function(item){return key===item.key;});if(index>-1){item=newData[index];newData.splice(index,1,_objectSpread(_objectSpread({},item),row));setData(newData);setEditingKey(\"\");}else{newData.push(row);setData(newData);setEditingKey(\"\");}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(\"Validate Failed:\",_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function save(_x){return _ref2.apply(this,arguments);};}();var columns=[{title:\"name\",dataIndex:\"name\",width:\"25%\",editable:true},{title:\"age\",dataIndex:\"age\",width:\"15%\",editable:true},{title:\"address\",dataIndex:\"address\",width:\"40%\",editable:true},{title:\"operation\",dataIndex:\"operation\",render:function render(_,record){var editable=isEditing(record);return editable?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Typography.Link,{onClick:function onClick(){return save(record.key);},style:{marginRight:8},children:\"Save\"}),/*#__PURE__*/_jsx(Popconfirm,{title:\"Sure to cancel?\",onConfirm:cancel,children:/*#__PURE__*/_jsx(\"a\",{children:\"Cancel\"})})]}):/*#__PURE__*/_jsx(Typography.Link,{disabled:editingKey!==\"\",onClick:function onClick(){return edit(record);},children:\"Edit\"});}}];var mergedColumns=columns.map(function(col){if(!col.editable){return col;}return _objectSpread(_objectSpread({},col),{},{onCell:function onCell(record){return{record:record,inputType:col.dataIndex===\"text\",dataIndex:col.dataIndex,title:col.title,editing:isEditing(record)};}});});return/*#__PURE__*/_jsx(Form,{form:form,component:false,children:/*#__PURE__*/_jsx(Table,{components:{body:{cell:EditableCell}},bordered:true,dataSource:data,columns:mergedColumns,rowClassName:\"editable-row\",pagination:{onChange:cancel}})});};export default Content;","map":{"version":3,"names":["React","useState","Form","Input","InputNumber","Popconfirm","Table","Typography","jsx","_jsx","jsxs","_jsxs","originData","i","push","key","toString","name","concat","age","address","EditableCell","_ref","editing","dataIndex","title","inputType","record","index","children","restProps","_objectWithoutProperties","_excluded","inputNode","_objectSpread","Item","style","margin","rules","required","message","Content","_Form$useForm","useForm","_Form$useForm2","_slicedToArray","form","_useState","_useState2","data","setData","_useState3","_useState4","editingKey","setEditingKey","isEditing","edit","setFieldsValue","cancel","save","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","row","newData","item","wrap","_callee$","_context","prev","next","validateFields","sent","_toConsumableArray","findIndex","splice","t0","console","log","stop","_x","apply","arguments","columns","width","editable","render","_","Link","onClick","marginRight","onConfirm","disabled","mergedColumns","map","col","onCell","component","components","body","cell","bordered","dataSource","rowClassName","pagination","onChange"],"sources":["D:/LearnDeveloper/ReactJS/student_manage_infor/src/content.jsx"],"sourcesContent":["import React, { useState } from \"react\"\r\nimport \"./index.css\"\r\nimport { Form, Input, InputNumber, Popconfirm, Table, Typography } from \"antd\"\r\n\r\nconst originData = []\r\nfor (let i = 0; i < 100; i++) {\r\n  originData.push({\r\n    key: i.toString(),\r\n    name: `Edward ${i}`,\r\n    age: 32,\r\n    address: `London Park no. ${i}`\r\n  })\r\n}\r\n\r\nconst EditableCell = ({\r\n  editing,\r\n  dataIndex,\r\n  title,\r\n  inputType,\r\n  record,\r\n  index,\r\n  children,\r\n  ...restProps\r\n}) => {\r\n  const inputNode = inputType === \"number\" ? <InputNumber /> : <Input />\r\n\r\n  return (\r\n    <td {...restProps}>\r\n      {editing ? (\r\n        <Form.Item\r\n          name={dataIndex}\r\n          style={{ margin: 0 }}\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: `Please Input ${title}!`\r\n            }\r\n          ]}\r\n        >\r\n          {inputNode}\r\n        </Form.Item>\r\n      ) : (\r\n        children\r\n      )}\r\n    </td>\r\n  )\r\n}\r\n    \r\nconst Content = () => {\r\n  const [form] = Form.useForm()\r\n  const [data, setData] = useState(originData)\r\n  const [editingKey, setEditingKey] = useState(\"\")\r\n\r\n  const isEditing = record => record.key === editingKey\r\n\r\n  const edit = record => {\r\n    form.setFieldsValue({ name: \"\", age: \"\", address: \"\", ...record })\r\n    setEditingKey(record.key)\r\n  }\r\n\r\n  const cancel = () => {\r\n    setEditingKey(\"\")\r\n  }\r\n\r\n  const save = async key => {\r\n    try {\r\n      const row = await form.validateFields()\r\n\r\n      const newData = [...data]\r\n      const index = newData.findIndex(item => key === item.key)\r\n      if (index > -1) {\r\n        const item = newData[index]\r\n        newData.splice(index, 1, {\r\n          ...item,\r\n          ...row\r\n        })\r\n        setData(newData)\r\n        setEditingKey(\"\")\r\n      } else {\r\n        newData.push(row)\r\n        setData(newData)\r\n        setEditingKey(\"\")\r\n      }\r\n    } catch (errInfo) {\r\n      console.log(\"Validate Failed:\", errInfo)\r\n    }\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: \"name\",\r\n      dataIndex: \"name\",\r\n      width: \"25%\",\r\n      editable: true\r\n    },\r\n    {\r\n      title: \"age\",\r\n      dataIndex: \"age\",\r\n      width: \"15%\",\r\n      editable: true\r\n    },\r\n    {\r\n      title: \"address\",\r\n      dataIndex: \"address\",\r\n      width: \"40%\",\r\n      editable: true\r\n    },\r\n    {\r\n      title: \"operation\",\r\n      dataIndex: \"operation\",\r\n      render: (_, record) => {\r\n        const editable = isEditing(record)\r\n        return editable ? (\r\n          <span>\r\n            <Typography.Link\r\n              onClick={() => save(record.key)}\r\n              style={{ marginRight: 8 }}\r\n            >\r\n              Save\r\n            </Typography.Link>\r\n            <Popconfirm title=\"Sure to cancel?\" onConfirm={cancel}>\r\n              <a>Cancel</a>\r\n            </Popconfirm>\r\n          </span>\r\n        ) : (\r\n          <Typography.Link\r\n            disabled={editingKey !== \"\"}\r\n            onClick={() => edit(record)}\r\n          >\r\n            Edit\r\n          </Typography.Link>\r\n        )\r\n      }\r\n    }\r\n  ]\r\n\r\n  const mergedColumns = columns.map(col => {\r\n    if (!col.editable) {\r\n      return col\r\n    }\r\n    return {\r\n      ...col,\r\n      onCell: record => ({\r\n        record,\r\n        inputType: col.dataIndex === \"text\",\r\n        dataIndex: col.dataIndex,\r\n        title: col.title,\r\n        editing: isEditing(record)\r\n      })\r\n    }\r\n  })\r\n\r\n  return (\r\n    <Form form={form} component={false}>\r\n      <Table\r\n        components={{\r\n          body: {\r\n            cell: EditableCell\r\n          }\r\n        }}\r\n        bordered\r\n        dataSource={data}\r\n        columns={mergedColumns}\r\n        rowClassName=\"editable-row\"\r\n        pagination={{\r\n          onChange: cancel\r\n        }}\r\n      />\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default Content\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}