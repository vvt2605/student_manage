{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nimport useSWR from 'swr';\nvar testId = 0;\nexport function useFetchData(props) {\n  /** Key 是用来缓存请求的，如果不在是有问题 */\n  var _useState = useState(function () {\n      if (props.proFieldKey) {\n        return props.proFieldKey.toString();\n      }\n      testId += 1;\n      return testId.toString();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    cacheKey = _useState2[0];\n  var proFieldKeyRef = useRef(cacheKey);\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _props$request;\n      var loadData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return (_props$request = props.request) === null || _props$request === void 0 ? void 0 : _props$request.call(props, props.params, props);\n          case 2:\n            loadData = _context.sent;\n            return _context.abrupt(\"return\", loadData);\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    return function () {\n      testId += 1;\n    };\n  }, []);\n  var _useSWR = useSWR([proFieldKeyRef.current, props.params], fetchData, {\n      revalidateOnFocus: false,\n      shouldRetryOnError: false,\n      revalidateOnReconnect: false\n    }),\n    data = _useSWR.data,\n    error = _useSWR.error;\n  return [data || error];\n}","map":{"version":3,"names":["_regeneratorRuntime","_asyncToGenerator","_slicedToArray","useEffect","useRef","useState","useSWR","testId","useFetchData","props","_useState","proFieldKey","toString","_useState2","cacheKey","proFieldKeyRef","fetchData","_ref","mark","_callee","_props$request","loadData","wrap","_callee$","_context","prev","next","request","call","params","sent","abrupt","stop","apply","arguments","_useSWR","current","revalidateOnFocus","shouldRetryOnError","revalidateOnReconnect","data","error"],"sources":["D:/LearnDeveloper/ReactJS/student-management-infor/node_modules/@ant-design/pro-utils/es/hooks/useFetchData/index.js"],"sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nimport useSWR from 'swr';\nvar testId = 0;\nexport function useFetchData(props) {\n  /** Key 是用来缓存请求的，如果不在是有问题 */\n  var _useState = useState(function () {\n      if (props.proFieldKey) {\n        return props.proFieldKey.toString();\n      }\n      testId += 1;\n      return testId.toString();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    cacheKey = _useState2[0];\n  var proFieldKeyRef = useRef(cacheKey);\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _props$request;\n      var loadData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return (_props$request = props.request) === null || _props$request === void 0 ? void 0 : _props$request.call(props, props.params, props);\n          case 2:\n            loadData = _context.sent;\n            return _context.abrupt(\"return\", loadData);\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    return function () {\n      testId += 1;\n    };\n  }, []);\n  var _useSWR = useSWR([proFieldKeyRef.current, props.params], fetchData, {\n      revalidateOnFocus: false,\n      shouldRetryOnError: false,\n      revalidateOnReconnect: false\n    }),\n    data = _useSWR.data,\n    error = _useSWR.error;\n  return [data || error];\n}"],"mappings":"AAAA,OAAOA,mBAAmB,MAAM,+CAA+C;AAC/E,OAAOC,iBAAiB,MAAM,6CAA6C;AAC3E,OAAOC,cAAc,MAAM,0CAA0C;AACrE,SAASC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,OAAOC,MAAM,MAAM,KAAK;AACxB,IAAIC,MAAM,GAAG,CAAC;AACd,OAAO,SAASC,YAAYA,CAACC,KAAK,EAAE;EAClC;EACA,IAAIC,SAAS,GAAGL,QAAQ,CAAC,YAAY;MACjC,IAAII,KAAK,CAACE,WAAW,EAAE;QACrB,OAAOF,KAAK,CAACE,WAAW,CAACC,QAAQ,EAAE;MACrC;MACAL,MAAM,IAAI,CAAC;MACX,OAAOA,MAAM,CAACK,QAAQ,EAAE;IAC1B,CAAC,CAAC;IACFC,UAAU,GAAGX,cAAc,CAACQ,SAAS,EAAE,CAAC,CAAC;IACzCI,QAAQ,GAAGD,UAAU,CAAC,CAAC,CAAC;EAC1B,IAAIE,cAAc,GAAGX,MAAM,CAACU,QAAQ,CAAC;EACrC,IAAIE,SAAS,GAAG,aAAa,YAAY;IACvC,IAAIC,IAAI,GAAGhB,iBAAiB,EAAE,aAAaD,mBAAmB,EAAE,CAACkB,IAAI,CAAC,SAASC,OAAOA,CAAA,EAAG;MACvF,IAAIC,cAAc;MAClB,IAAIC,QAAQ;MACZ,OAAOrB,mBAAmB,EAAE,CAACsB,IAAI,CAAC,SAASC,QAAQA,CAACC,QAAQ,EAAE;QAC5D,OAAO,CAAC,EAAE,QAAQA,QAAQ,CAACC,IAAI,GAAGD,QAAQ,CAACE,IAAI;UAC7C,KAAK,CAAC;YACJF,QAAQ,CAACE,IAAI,GAAG,CAAC;YACjB,OAAO,CAACN,cAAc,GAAGX,KAAK,CAACkB,OAAO,MAAM,IAAI,IAAIP,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACQ,IAAI,CAACnB,KAAK,EAAEA,KAAK,CAACoB,MAAM,EAAEpB,KAAK,CAAC;UAC1I,KAAK,CAAC;YACJY,QAAQ,GAAGG,QAAQ,CAACM,IAAI;YACxB,OAAON,QAAQ,CAACO,MAAM,CAAC,QAAQ,EAAEV,QAAQ,CAAC;UAC5C,KAAK,CAAC;UACN,KAAK,KAAK;YACR,OAAOG,QAAQ,CAACQ,IAAI,EAAE;QAAC;MAE7B,CAAC,EAAEb,OAAO,CAAC;IACb,CAAC,CAAC,CAAC;IACH,OAAO,SAASH,SAASA,CAAA,EAAG;MAC1B,OAAOC,IAAI,CAACgB,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IACpC,CAAC;EACH,CAAC,EAAE;EACH/B,SAAS,CAAC,YAAY;IACpB,OAAO,YAAY;MACjBI,MAAM,IAAI,CAAC;IACb,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,IAAI4B,OAAO,GAAG7B,MAAM,CAAC,CAACS,cAAc,CAACqB,OAAO,EAAE3B,KAAK,CAACoB,MAAM,CAAC,EAAEb,SAAS,EAAE;MACpEqB,iBAAiB,EAAE,KAAK;MACxBC,kBAAkB,EAAE,KAAK;MACzBC,qBAAqB,EAAE;IACzB,CAAC,CAAC;IACFC,IAAI,GAAGL,OAAO,CAACK,IAAI;IACnBC,KAAK,GAAGN,OAAO,CAACM,KAAK;EACvB,OAAO,CAACD,IAAI,IAAIC,KAAK,CAAC;AACxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}