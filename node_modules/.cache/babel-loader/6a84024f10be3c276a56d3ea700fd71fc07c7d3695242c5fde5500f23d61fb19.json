{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"value\", \"text\"],\n  _excluded2 = [\"mode\", \"valueEnum\", \"render\", \"renderFormItem\", \"request\", \"fieldProps\", \"plain\", \"children\", \"light\", \"proFieldKey\", \"params\", \"label\", \"bordered\", \"id\", \"lightLabel\", \"labelTrigger\"];\nimport { useIntl } from '@ant-design/pro-provider';\nimport { nanoid, useDebounceValue, useDeepCompareEffect, useMountMergeState, useStyle } from '@ant-design/pro-utils';\nimport { ConfigProvider, Space, Spin } from 'antd';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport useSWR from 'swr';\nimport TableStatus, { ProFieldBadgeColor } from \"../Status\";\nimport LightSelect from \"./LightSelect\";\nimport SearchSelect from \"./SearchSelect\";\n\n// 兼容代码-----------\nimport \"antd/es/select/style\";\n//------------\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport var ObjToMap = function ObjToMap(value) {\n  if (getType(value) === 'map') {\n    return value;\n  }\n  return new Map(Object.entries(value || {}));\n};\n\n/**\n * 转化 text 和 valueEnum 通过 type 来添加 Status\n *\n * @param text\n * @param valueEnum\n * @param pure 纯净模式，不增加 status\n */\nexport var proFieldParsingText = function proFieldParsingText(text, valueEnumParams, key) {\n  if (Array.isArray(text)) {\n    return /*#__PURE__*/_jsx(Space, {\n      split: \",\",\n      size: 2,\n      wrap: true,\n      children: text.map(function (value, index) {\n        return (\n          // @ts-ignore\n          proFieldParsingText(value, valueEnumParams, index)\n        );\n      })\n    }, key);\n  }\n  var valueEnum = ObjToMap(valueEnumParams);\n  if (!valueEnum.has(text) && !valueEnum.has(\"\".concat(text))) {\n    // @ts-ignore\n    return (text === null || text === void 0 ? void 0 : text.label) || text;\n  }\n  var domText = valueEnum.get(text) || valueEnum.get(\"\".concat(text));\n  if (!domText) {\n    // @ts-ignore\n    return /*#__PURE__*/_jsx(React.Fragment, {\n      children: (text === null || text === void 0 ? void 0 : text.label) || text\n    }, key);\n  }\n  var status = domText.status,\n    color = domText.color;\n  var Status = TableStatus[status || 'Init'];\n  // 如果类型存在优先使用类型\n  if (Status) {\n    return /*#__PURE__*/_jsx(Status, {\n      children: domText.text\n    }, key);\n  }\n\n  // 如果不存在使用颜色\n  if (color) {\n    return /*#__PURE__*/_jsx(ProFieldBadgeColor, {\n      color: color,\n      children: domText.text\n    }, key);\n  }\n  // 什么都没有使用 text\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: domText.text || domText\n  }, key);\n};\nvar Highlight = function Highlight(_ref) {\n  var label = _ref.label,\n    words = _ref.words;\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var lightCls = getPrefixCls('pro-select-item-option-content-light');\n  var optionCls = getPrefixCls('pro-select-item-option-content');\n\n  // css\n  var _useStyle = useStyle('Highlight', function (token) {\n      var _ref2;\n      return _ref2 = {}, _defineProperty(_ref2, \".\".concat(lightCls), {\n        color: token.colorPrimary\n      }), _defineProperty(_ref2, \".\".concat(optionCls), {\n        flex: 'auto',\n        overflow: 'hidden',\n        whiteSpace: 'nowrap',\n        textOverflow: 'ellipsis'\n      }), _ref2;\n    }),\n    wrapSSR = _useStyle.wrapSSR;\n  var matchKeywordsRE = new RegExp(words.map(function (word) {\n    return word.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n  }).join('|'), 'gi');\n  var matchText = label;\n  var elements = [];\n  while (matchText.length) {\n    var match = matchKeywordsRE.exec(matchText);\n    if (!match) {\n      elements.push(matchText);\n      break;\n    }\n    var start = match.index;\n    var matchLength = match[0].length + start;\n    elements.push(matchText.slice(0, start), /*#__PURE__*/React.createElement('span', {\n      className: lightCls\n    }, matchText.slice(start, matchLength)));\n    matchText = matchText.slice(matchLength);\n  }\n  return wrapSSR( /*#__PURE__*/React.createElement.apply(React, ['div', {\n    title: label,\n    className: optionCls\n  }].concat(elements)));\n};\n\n/**\n * 获取类型的 type\n *\n * @param obj\n */\nfunction getType(obj) {\n  // @ts-ignore\n  var type = Object.prototype.toString.call(obj).match(/^\\[object (.*)\\]$/)[1].toLowerCase();\n  if (type === 'string' && _typeof(obj) === 'object') return 'object'; // Let \"new String('')\" return 'object'\n  if (obj === null) return 'null'; // PhantomJS has type \"DOMWindow\" for null\n  if (obj === undefined) return 'undefined'; // PhantomJS has type \"DOMWindow\" for undefined\n  return type;\n}\n\n/**\n * 递归筛选 item\n *\n * @param item\n * @param keyWords\n * @returns\n */\nfunction filerByItem(item, keyWords) {\n  var _item$label, _item$value;\n  if (!keyWords) return true;\n  if (item !== null && item !== void 0 && (_item$label = item.label) !== null && _item$label !== void 0 && _item$label.toString().toLowerCase().includes(keyWords.toLowerCase()) || item !== null && item !== void 0 && (_item$value = item.value) !== null && _item$value !== void 0 && _item$value.toString().toLowerCase().includes(keyWords.toLowerCase())) {\n    return true;\n  }\n  if (item.children || item.options) {\n    var findItem = [].concat(_toConsumableArray(item.children || []), [item.options || []]).find(function (mapItem) {\n      return filerByItem(mapItem, keyWords);\n    });\n    if (findItem) return true;\n  }\n  return false;\n}\n\n/**\n * 把 value 的枚举转化为数组\n *\n * @param valueEnum\n */\nexport var proFieldParsingValueEnumToArray = function proFieldParsingValueEnumToArray(valueEnumParams) {\n  var enumArray = [];\n  var valueEnum = ObjToMap(valueEnumParams);\n  valueEnum.forEach(function (_, key) {\n    var value = valueEnum.get(key) || valueEnum.get(\"\".concat(key));\n    if (!value) {\n      return;\n    }\n    if (_typeof(value) === 'object' && value !== null && value !== void 0 && value.text) {\n      enumArray.push({\n        text: value === null || value === void 0 ? void 0 : value.text,\n        value: key,\n        label: value === null || value === void 0 ? void 0 : value.text,\n        disabled: value.disabled\n      });\n      return;\n    }\n    enumArray.push({\n      text: value,\n      value: key\n    });\n  });\n  return enumArray;\n};\nexport var useFieldFetchData = function useFieldFetchData(props) {\n  var _ref5, _props$debounceTime, _props$fieldProps3, _props$fieldProps6;\n  var cacheForSwr = props.cacheForSwr,\n    fieldProps = props.fieldProps;\n  var _useState = useState(props.defaultKeyWords),\n    _useState2 = _slicedToArray(_useState, 2),\n    keyWords = _useState2[0],\n    setKeyWords = _useState2[1];\n  /** Key 是用来缓存请求的，如果不在是有问题 */\n  var _useState3 = useState(function () {\n      if (props.proFieldKey) {\n        return props.proFieldKey.toString();\n      }\n      if (props.request) {\n        return nanoid();\n      }\n      return 'no-fetch';\n    }),\n    _useState4 = _slicedToArray(_useState3, 1),\n    cacheKey = _useState4[0];\n  var proFieldKeyRef = useRef(cacheKey);\n  var getOptionsFormValueEnum = useCallback(function (coverValueEnum) {\n    return proFieldParsingValueEnumToArray(ObjToMap(coverValueEnum)).map(function (_ref3) {\n      var value = _ref3.value,\n        text = _ref3.text,\n        rest = _objectWithoutProperties(_ref3, _excluded);\n      return _objectSpread({\n        label: text,\n        value: value,\n        key: value\n      }, rest);\n    });\n  }, []);\n  var defaultOptions = useMemo(function () {\n    if (!fieldProps) return undefined;\n    var data = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.options) || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.treeData);\n    if (!data) return undefined;\n    var _ref4 = fieldProps.fieldNames || {},\n      children = _ref4.children,\n      label = _ref4.label,\n      value = _ref4.value;\n    var traverseFieldKey = function traverseFieldKey(_options, type) {\n      if (!(_options !== null && _options !== void 0 && _options.length)) return;\n      var length = _options.length;\n      var i = 0;\n      while (i < length) {\n        var cur = _options[i++];\n        if (cur[children] || cur[label] || cur[value]) {\n          cur[type] = cur[type === 'children' ? children : type === 'label' ? label : value];\n          traverseFieldKey(cur[children], type);\n        }\n      }\n    };\n    if (children) traverseFieldKey(data, 'children');\n    if (label) traverseFieldKey(data, 'label');\n    if (value) traverseFieldKey(data, 'value');\n    return data;\n  }, [fieldProps]);\n  var _useMountMergeState = useMountMergeState(function () {\n      if (props.valueEnum) {\n        return getOptionsFormValueEnum(props.valueEnum);\n      }\n      return [];\n    }, {\n      value: defaultOptions\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    options = _useMountMergeState2[0],\n    setOptions = _useMountMergeState2[1];\n  useDeepCompareEffect(function () {\n    var _props$fieldProps, _props$fieldProps2;\n    // 优先使用 fieldProps?.options\n    if (!props.valueEnum || (_props$fieldProps = props.fieldProps) !== null && _props$fieldProps !== void 0 && _props$fieldProps.options || (_props$fieldProps2 = props.fieldProps) !== null && _props$fieldProps2 !== void 0 && _props$fieldProps2.treeData) return;\n    setOptions(getOptionsFormValueEnum(props.valueEnum));\n  }, [props.valueEnum]);\n  var swrKey = useDebounceValue([proFieldKeyRef.current, props.params, keyWords], (_ref5 = (_props$debounceTime = props.debounceTime) !== null && _props$debounceTime !== void 0 ? _props$debounceTime : props === null || props === void 0 ? void 0 : (_props$fieldProps3 = props.fieldProps) === null || _props$fieldProps3 === void 0 ? void 0 : _props$fieldProps3.debounceTime) !== null && _ref5 !== void 0 ? _ref5 : 0, [props.params, keyWords]);\n  var _useSWR = useSWR(function () {\n      if (!props.request) {\n        return null;\n      }\n      return swrKey;\n    }, function (_ref6) {\n      var _ref7 = _slicedToArray(_ref6, 3),\n        params = _ref7[1],\n        kw = _ref7[2];\n      return props.request(_objectSpread(_objectSpread({}, params), {}, {\n        keyWords: kw\n      }), props);\n    }, {\n      revalidateIfStale: !cacheForSwr,\n      // 打开 cacheForSwr 的时候才应该支持两个功能\n      revalidateOnReconnect: cacheForSwr,\n      shouldRetryOnError: false,\n      // @todo 这个功能感觉应该搞个API出来\n      revalidateOnFocus: false\n    }),\n    data = _useSWR.data,\n    setLocaleData = _useSWR.mutate,\n    isValidating = _useSWR.isValidating;\n  var resOptions = useMemo(function () {\n    var _props$fieldProps4, _props$fieldProps5;\n    var opt = options === null || options === void 0 ? void 0 : options.map(function (item) {\n      if (typeof item === 'string') {\n        return {\n          label: item,\n          value: item\n        };\n      }\n      if (item.children || item.options) {\n        var childrenOptions = [].concat(_toConsumableArray(item.children || []), _toConsumableArray(item.options || [])).filter(function (mapItem) {\n          return filerByItem(mapItem, keyWords);\n        });\n        return _objectSpread(_objectSpread({}, item), {}, {\n          children: childrenOptions,\n          options: childrenOptions\n        });\n      }\n      return item;\n    });\n\n    // filterOption 为 true 时 filter数据, filterOption 默认为true\n    if (((_props$fieldProps4 = props.fieldProps) === null || _props$fieldProps4 === void 0 ? void 0 : _props$fieldProps4.filterOption) === true || ((_props$fieldProps5 = props.fieldProps) === null || _props$fieldProps5 === void 0 ? void 0 : _props$fieldProps5.filterOption) === undefined) {\n      return opt === null || opt === void 0 ? void 0 : opt.filter(function (item) {\n        if (!item) return false;\n        if (!keyWords) return true;\n        return filerByItem(item, keyWords);\n      });\n    }\n    return opt;\n  }, [options, keyWords, (_props$fieldProps6 = props.fieldProps) === null || _props$fieldProps6 === void 0 ? void 0 : _props$fieldProps6.filterOption]);\n  return [isValidating, props.request ? data : resOptions, function (fetchKeyWords) {\n    setKeyWords(fetchKeyWords);\n  }, function () {\n    setKeyWords(undefined);\n    setLocaleData([], false);\n  }];\n};\n\n/**\n * 可以根据 valueEnum 来进行类型的设置\n *\n * @param\n */\nvar FieldSelect = function FieldSelect(props, ref) {\n  var _ConfigProvider$useCo;\n  var mode = props.mode,\n    valueEnum = props.valueEnum,\n    render = props.render,\n    renderFormItem = props.renderFormItem,\n    request = props.request,\n    fieldProps = props.fieldProps,\n    plain = props.plain,\n    children = props.children,\n    light = props.light,\n    proFieldKey = props.proFieldKey,\n    params = props.params,\n    label = props.label,\n    bordered = props.bordered,\n    id = props.id,\n    lightLabel = props.lightLabel,\n    labelTrigger = props.labelTrigger,\n    rest = _objectWithoutProperties(props, _excluded2);\n  var inputRef = useRef();\n  var intl = useIntl();\n  var keyWordsRef = useRef('');\n  var fieldNames = fieldProps.fieldNames;\n  useEffect(function () {\n    keyWordsRef.current = fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.searchValue;\n  }, [fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.searchValue]);\n  var _useFieldFetchData = useFieldFetchData(props),\n    _useFieldFetchData2 = _slicedToArray(_useFieldFetchData, 4),\n    loading = _useFieldFetchData2[0],\n    options = _useFieldFetchData2[1],\n    _fetchData = _useFieldFetchData2[2],\n    resetData = _useFieldFetchData2[3];\n  var _ref8 = (ConfigProvider === null || ConfigProvider === void 0 ? void 0 : (_ConfigProvider$useCo = ConfigProvider.useConfig) === null || _ConfigProvider$useCo === void 0 ? void 0 : _ConfigProvider$useCo.call(ConfigProvider)) || {\n      componentSize: 'middle'\n    },\n    componentSize = _ref8.componentSize;\n  useImperativeHandle(ref, function () {\n    return _objectSpread(_objectSpread({}, inputRef.current || {}), {}, {\n      fetchData: function fetchData(keyWord) {\n        return _fetchData(keyWord);\n      }\n    });\n  });\n  var optionsValueEnum = useMemo(function () {\n    if (mode !== 'read') return;\n    var _ref9 = fieldNames || {},\n      _ref9$label = _ref9.label,\n      labelPropsName = _ref9$label === void 0 ? 'label' : _ref9$label,\n      _ref9$value = _ref9.value,\n      valuePropsName = _ref9$value === void 0 ? 'value' : _ref9$value,\n      _ref9$options = _ref9.options,\n      optionsPropsName = _ref9$options === void 0 ? 'options' : _ref9$options;\n    var valuesMap = new Map();\n    var traverseOptions = function traverseOptions(_options) {\n      if (!(_options !== null && _options !== void 0 && _options.length)) {\n        return valuesMap;\n      }\n      var length = _options.length;\n      var i = 0;\n      while (i < length) {\n        var cur = _options[i++];\n        valuesMap.set(cur[valuePropsName], cur[labelPropsName]);\n        traverseOptions(cur[optionsPropsName]);\n      }\n      return valuesMap;\n    };\n    return traverseOptions(options);\n  }, [fieldNames, mode, options]);\n  if (mode === 'read') {\n    var dom = /*#__PURE__*/_jsx(_Fragment, {\n      children: proFieldParsingText(rest.text, ObjToMap(valueEnum || optionsValueEnum))\n    });\n    if (render) {\n      return render(rest.text, _objectSpread({\n        mode: mode\n      }, fieldProps), dom) || null;\n    }\n    return dom;\n  }\n  if (mode === 'edit' || mode === 'update') {\n    var renderDom = function renderDom() {\n      if (light) {\n        return /*#__PURE__*/_jsx(LightSelect, _objectSpread({\n          bordered: bordered,\n          id: id,\n          loading: loading,\n          ref: inputRef,\n          allowClear: true,\n          size: componentSize,\n          options: options,\n          label: label,\n          placeholder: intl.getMessage('tableForm.selectPlaceholder', '请选择'),\n          lightLabel: lightLabel,\n          labelTrigger: labelTrigger\n        }, fieldProps));\n      }\n      return /*#__PURE__*/_jsx(SearchSelect, _objectSpread(_objectSpread({\n        className: rest.className,\n        style: _objectSpread({\n          minWidth: 100\n        }, rest.style),\n        bordered: bordered,\n        id: id,\n        loading: loading,\n        ref: inputRef,\n        allowClear: true,\n        defaultSearchValue: props.defaultKeyWords,\n        notFoundContent: loading ? /*#__PURE__*/_jsx(Spin, {\n          size: \"small\"\n        }) : fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.notFoundContent,\n        fetchData: function fetchData(keyWord) {\n          keyWordsRef.current = keyWord !== null && keyWord !== void 0 ? keyWord : '';\n          _fetchData(keyWord);\n        },\n        resetData: resetData,\n        optionItemRender: function optionItemRender(item) {\n          if (typeof item.label === 'string' && keyWordsRef.current) {\n            return /*#__PURE__*/_jsx(Highlight, {\n              label: item.label,\n              words: [keyWordsRef.current]\n            });\n          }\n          return item.label;\n        },\n        placeholder: intl.getMessage('tableForm.selectPlaceholder', '请选择'),\n        label: label\n      }, fieldProps), {}, {\n        options: options\n      }), \"SearchSelect\");\n    };\n    var _dom = renderDom();\n    if (renderFormItem) {\n      return renderFormItem(rest.text, _objectSpread(_objectSpread({\n        mode: mode\n      }, fieldProps), {}, {\n        options: options\n      }), _dom) || null;\n    }\n    return _dom;\n  }\n  return null;\n};\nexport default /*#__PURE__*/React.forwardRef(FieldSelect);","map":{"version":3,"names":["_objectSpread","_objectWithoutProperties","_slicedToArray","_toConsumableArray","_typeof","_defineProperty","_excluded","_excluded2","useIntl","nanoid","useDebounceValue","useDeepCompareEffect","useMountMergeState","useStyle","ConfigProvider","Space","Spin","React","useCallback","useContext","useEffect","useImperativeHandle","useMemo","useRef","useState","useSWR","TableStatus","ProFieldBadgeColor","LightSelect","SearchSelect","jsx","_jsx","Fragment","_Fragment","ObjToMap","value","getType","Map","Object","entries","proFieldParsingText","text","valueEnumParams","key","Array","isArray","split","size","wrap","children","map","index","valueEnum","has","concat","label","domText","get","status","color","Status","Highlight","_ref","words","_useContext","ConfigContext","getPrefixCls","lightCls","optionCls","_useStyle","token","_ref2","colorPrimary","flex","overflow","whiteSpace","textOverflow","wrapSSR","matchKeywordsRE","RegExp","word","replace","join","matchText","elements","length","match","exec","push","start","matchLength","slice","createElement","className","apply","title","obj","type","prototype","toString","call","toLowerCase","undefined","filerByItem","item","keyWords","_item$label","_item$value","includes","options","findItem","find","mapItem","proFieldParsingValueEnumToArray","enumArray","forEach","_","disabled","useFieldFetchData","props","_ref5","_props$debounceTime","_props$fieldProps3","_props$fieldProps6","cacheForSwr","fieldProps","_useState","defaultKeyWords","_useState2","setKeyWords","_useState3","proFieldKey","request","_useState4","cacheKey","proFieldKeyRef","getOptionsFormValueEnum","coverValueEnum","_ref3","rest","defaultOptions","data","treeData","_ref4","fieldNames","traverseFieldKey","_options","i","cur","_useMountMergeState","_useMountMergeState2","setOptions","_props$fieldProps","_props$fieldProps2","swrKey","current","params","debounceTime","_useSWR","_ref6","_ref7","kw","revalidateIfStale","revalidateOnReconnect","shouldRetryOnError","revalidateOnFocus","setLocaleData","mutate","isValidating","resOptions","_props$fieldProps4","_props$fieldProps5","opt","childrenOptions","filter","filterOption","fetchKeyWords","FieldSelect","ref","_ConfigProvider$useCo","mode","render","renderFormItem","plain","light","bordered","id","lightLabel","labelTrigger","inputRef","intl","keyWordsRef","searchValue","_useFieldFetchData","_useFieldFetchData2","loading","_fetchData","resetData","_ref8","useConfig","componentSize","fetchData","keyWord","optionsValueEnum","_ref9","_ref9$label","labelPropsName","_ref9$value","valuePropsName","_ref9$options","optionsPropsName","valuesMap","traverseOptions","set","dom","renderDom","allowClear","placeholder","getMessage","style","minWidth","defaultSearchValue","notFoundContent","optionItemRender","_dom","forwardRef"],"sources":["D:/LearnDeveloper/ReactJS/student-management-infor/node_modules/@ant-design/pro-field/es/components/Select/index.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"value\", \"text\"],\n  _excluded2 = [\"mode\", \"valueEnum\", \"render\", \"renderFormItem\", \"request\", \"fieldProps\", \"plain\", \"children\", \"light\", \"proFieldKey\", \"params\", \"label\", \"bordered\", \"id\", \"lightLabel\", \"labelTrigger\"];\nimport { useIntl } from '@ant-design/pro-provider';\nimport { nanoid, useDebounceValue, useDeepCompareEffect, useMountMergeState, useStyle } from '@ant-design/pro-utils';\nimport { ConfigProvider, Space, Spin } from 'antd';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport useSWR from 'swr';\nimport TableStatus, { ProFieldBadgeColor } from \"../Status\";\nimport LightSelect from \"./LightSelect\";\nimport SearchSelect from \"./SearchSelect\";\n\n// 兼容代码-----------\nimport \"antd/es/select/style\";\n//------------\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport var ObjToMap = function ObjToMap(value) {\n  if (getType(value) === 'map') {\n    return value;\n  }\n  return new Map(Object.entries(value || {}));\n};\n\n/**\n * 转化 text 和 valueEnum 通过 type 来添加 Status\n *\n * @param text\n * @param valueEnum\n * @param pure 纯净模式，不增加 status\n */\nexport var proFieldParsingText = function proFieldParsingText(text, valueEnumParams, key) {\n  if (Array.isArray(text)) {\n    return /*#__PURE__*/_jsx(Space, {\n      split: \",\",\n      size: 2,\n      wrap: true,\n      children: text.map(function (value, index) {\n        return (\n          // @ts-ignore\n          proFieldParsingText(value, valueEnumParams, index)\n        );\n      })\n    }, key);\n  }\n  var valueEnum = ObjToMap(valueEnumParams);\n  if (!valueEnum.has(text) && !valueEnum.has(\"\".concat(text))) {\n    // @ts-ignore\n    return (text === null || text === void 0 ? void 0 : text.label) || text;\n  }\n  var domText = valueEnum.get(text) || valueEnum.get(\"\".concat(text));\n  if (!domText) {\n    // @ts-ignore\n    return /*#__PURE__*/_jsx(React.Fragment, {\n      children: (text === null || text === void 0 ? void 0 : text.label) || text\n    }, key);\n  }\n  var status = domText.status,\n    color = domText.color;\n  var Status = TableStatus[status || 'Init'];\n  // 如果类型存在优先使用类型\n  if (Status) {\n    return /*#__PURE__*/_jsx(Status, {\n      children: domText.text\n    }, key);\n  }\n\n  // 如果不存在使用颜色\n  if (color) {\n    return /*#__PURE__*/_jsx(ProFieldBadgeColor, {\n      color: color,\n      children: domText.text\n    }, key);\n  }\n  // 什么都没有使用 text\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: domText.text || domText\n  }, key);\n};\nvar Highlight = function Highlight(_ref) {\n  var label = _ref.label,\n    words = _ref.words;\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var lightCls = getPrefixCls('pro-select-item-option-content-light');\n  var optionCls = getPrefixCls('pro-select-item-option-content');\n\n  // css\n  var _useStyle = useStyle('Highlight', function (token) {\n      var _ref2;\n      return _ref2 = {}, _defineProperty(_ref2, \".\".concat(lightCls), {\n        color: token.colorPrimary\n      }), _defineProperty(_ref2, \".\".concat(optionCls), {\n        flex: 'auto',\n        overflow: 'hidden',\n        whiteSpace: 'nowrap',\n        textOverflow: 'ellipsis'\n      }), _ref2;\n    }),\n    wrapSSR = _useStyle.wrapSSR;\n  var matchKeywordsRE = new RegExp(words.map(function (word) {\n    return word.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n  }).join('|'), 'gi');\n  var matchText = label;\n  var elements = [];\n  while (matchText.length) {\n    var match = matchKeywordsRE.exec(matchText);\n    if (!match) {\n      elements.push(matchText);\n      break;\n    }\n    var start = match.index;\n    var matchLength = match[0].length + start;\n    elements.push(matchText.slice(0, start), /*#__PURE__*/React.createElement('span', {\n      className: lightCls\n    }, matchText.slice(start, matchLength)));\n    matchText = matchText.slice(matchLength);\n  }\n  return wrapSSR( /*#__PURE__*/React.createElement.apply(React, ['div', {\n    title: label,\n    className: optionCls\n  }].concat(elements)));\n};\n\n/**\n * 获取类型的 type\n *\n * @param obj\n */\nfunction getType(obj) {\n  // @ts-ignore\n  var type = Object.prototype.toString.call(obj).match(/^\\[object (.*)\\]$/)[1].toLowerCase();\n  if (type === 'string' && _typeof(obj) === 'object') return 'object'; // Let \"new String('')\" return 'object'\n  if (obj === null) return 'null'; // PhantomJS has type \"DOMWindow\" for null\n  if (obj === undefined) return 'undefined'; // PhantomJS has type \"DOMWindow\" for undefined\n  return type;\n}\n\n/**\n * 递归筛选 item\n *\n * @param item\n * @param keyWords\n * @returns\n */\nfunction filerByItem(item, keyWords) {\n  var _item$label, _item$value;\n  if (!keyWords) return true;\n  if (item !== null && item !== void 0 && (_item$label = item.label) !== null && _item$label !== void 0 && _item$label.toString().toLowerCase().includes(keyWords.toLowerCase()) || item !== null && item !== void 0 && (_item$value = item.value) !== null && _item$value !== void 0 && _item$value.toString().toLowerCase().includes(keyWords.toLowerCase())) {\n    return true;\n  }\n  if (item.children || item.options) {\n    var findItem = [].concat(_toConsumableArray(item.children || []), [item.options || []]).find(function (mapItem) {\n      return filerByItem(mapItem, keyWords);\n    });\n    if (findItem) return true;\n  }\n  return false;\n}\n\n/**\n * 把 value 的枚举转化为数组\n *\n * @param valueEnum\n */\nexport var proFieldParsingValueEnumToArray = function proFieldParsingValueEnumToArray(valueEnumParams) {\n  var enumArray = [];\n  var valueEnum = ObjToMap(valueEnumParams);\n  valueEnum.forEach(function (_, key) {\n    var value = valueEnum.get(key) || valueEnum.get(\"\".concat(key));\n    if (!value) {\n      return;\n    }\n    if (_typeof(value) === 'object' && value !== null && value !== void 0 && value.text) {\n      enumArray.push({\n        text: value === null || value === void 0 ? void 0 : value.text,\n        value: key,\n        label: value === null || value === void 0 ? void 0 : value.text,\n        disabled: value.disabled\n      });\n      return;\n    }\n    enumArray.push({\n      text: value,\n      value: key\n    });\n  });\n  return enumArray;\n};\nexport var useFieldFetchData = function useFieldFetchData(props) {\n  var _ref5, _props$debounceTime, _props$fieldProps3, _props$fieldProps6;\n  var cacheForSwr = props.cacheForSwr,\n    fieldProps = props.fieldProps;\n  var _useState = useState(props.defaultKeyWords),\n    _useState2 = _slicedToArray(_useState, 2),\n    keyWords = _useState2[0],\n    setKeyWords = _useState2[1];\n  /** Key 是用来缓存请求的，如果不在是有问题 */\n  var _useState3 = useState(function () {\n      if (props.proFieldKey) {\n        return props.proFieldKey.toString();\n      }\n      if (props.request) {\n        return nanoid();\n      }\n      return 'no-fetch';\n    }),\n    _useState4 = _slicedToArray(_useState3, 1),\n    cacheKey = _useState4[0];\n  var proFieldKeyRef = useRef(cacheKey);\n  var getOptionsFormValueEnum = useCallback(function (coverValueEnum) {\n    return proFieldParsingValueEnumToArray(ObjToMap(coverValueEnum)).map(function (_ref3) {\n      var value = _ref3.value,\n        text = _ref3.text,\n        rest = _objectWithoutProperties(_ref3, _excluded);\n      return _objectSpread({\n        label: text,\n        value: value,\n        key: value\n      }, rest);\n    });\n  }, []);\n  var defaultOptions = useMemo(function () {\n    if (!fieldProps) return undefined;\n    var data = (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.options) || (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.treeData);\n    if (!data) return undefined;\n    var _ref4 = fieldProps.fieldNames || {},\n      children = _ref4.children,\n      label = _ref4.label,\n      value = _ref4.value;\n    var traverseFieldKey = function traverseFieldKey(_options, type) {\n      if (!(_options !== null && _options !== void 0 && _options.length)) return;\n      var length = _options.length;\n      var i = 0;\n      while (i < length) {\n        var cur = _options[i++];\n        if (cur[children] || cur[label] || cur[value]) {\n          cur[type] = cur[type === 'children' ? children : type === 'label' ? label : value];\n          traverseFieldKey(cur[children], type);\n        }\n      }\n    };\n    if (children) traverseFieldKey(data, 'children');\n    if (label) traverseFieldKey(data, 'label');\n    if (value) traverseFieldKey(data, 'value');\n    return data;\n  }, [fieldProps]);\n  var _useMountMergeState = useMountMergeState(function () {\n      if (props.valueEnum) {\n        return getOptionsFormValueEnum(props.valueEnum);\n      }\n      return [];\n    }, {\n      value: defaultOptions\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    options = _useMountMergeState2[0],\n    setOptions = _useMountMergeState2[1];\n  useDeepCompareEffect(function () {\n    var _props$fieldProps, _props$fieldProps2;\n    // 优先使用 fieldProps?.options\n    if (!props.valueEnum || (_props$fieldProps = props.fieldProps) !== null && _props$fieldProps !== void 0 && _props$fieldProps.options || (_props$fieldProps2 = props.fieldProps) !== null && _props$fieldProps2 !== void 0 && _props$fieldProps2.treeData) return;\n    setOptions(getOptionsFormValueEnum(props.valueEnum));\n  }, [props.valueEnum]);\n  var swrKey = useDebounceValue([proFieldKeyRef.current, props.params, keyWords], (_ref5 = (_props$debounceTime = props.debounceTime) !== null && _props$debounceTime !== void 0 ? _props$debounceTime : props === null || props === void 0 ? void 0 : (_props$fieldProps3 = props.fieldProps) === null || _props$fieldProps3 === void 0 ? void 0 : _props$fieldProps3.debounceTime) !== null && _ref5 !== void 0 ? _ref5 : 0, [props.params, keyWords]);\n  var _useSWR = useSWR(function () {\n      if (!props.request) {\n        return null;\n      }\n      return swrKey;\n    }, function (_ref6) {\n      var _ref7 = _slicedToArray(_ref6, 3),\n        params = _ref7[1],\n        kw = _ref7[2];\n      return props.request(_objectSpread(_objectSpread({}, params), {}, {\n        keyWords: kw\n      }), props);\n    }, {\n      revalidateIfStale: !cacheForSwr,\n      // 打开 cacheForSwr 的时候才应该支持两个功能\n      revalidateOnReconnect: cacheForSwr,\n      shouldRetryOnError: false,\n      // @todo 这个功能感觉应该搞个API出来\n      revalidateOnFocus: false\n    }),\n    data = _useSWR.data,\n    setLocaleData = _useSWR.mutate,\n    isValidating = _useSWR.isValidating;\n  var resOptions = useMemo(function () {\n    var _props$fieldProps4, _props$fieldProps5;\n    var opt = options === null || options === void 0 ? void 0 : options.map(function (item) {\n      if (typeof item === 'string') {\n        return {\n          label: item,\n          value: item\n        };\n      }\n      if (item.children || item.options) {\n        var childrenOptions = [].concat(_toConsumableArray(item.children || []), _toConsumableArray(item.options || [])).filter(function (mapItem) {\n          return filerByItem(mapItem, keyWords);\n        });\n        return _objectSpread(_objectSpread({}, item), {}, {\n          children: childrenOptions,\n          options: childrenOptions\n        });\n      }\n      return item;\n    });\n\n    // filterOption 为 true 时 filter数据, filterOption 默认为true\n    if (((_props$fieldProps4 = props.fieldProps) === null || _props$fieldProps4 === void 0 ? void 0 : _props$fieldProps4.filterOption) === true || ((_props$fieldProps5 = props.fieldProps) === null || _props$fieldProps5 === void 0 ? void 0 : _props$fieldProps5.filterOption) === undefined) {\n      return opt === null || opt === void 0 ? void 0 : opt.filter(function (item) {\n        if (!item) return false;\n        if (!keyWords) return true;\n        return filerByItem(item, keyWords);\n      });\n    }\n    return opt;\n  }, [options, keyWords, (_props$fieldProps6 = props.fieldProps) === null || _props$fieldProps6 === void 0 ? void 0 : _props$fieldProps6.filterOption]);\n  return [isValidating, props.request ? data : resOptions, function (fetchKeyWords) {\n    setKeyWords(fetchKeyWords);\n  }, function () {\n    setKeyWords(undefined);\n    setLocaleData([], false);\n  }];\n};\n\n/**\n * 可以根据 valueEnum 来进行类型的设置\n *\n * @param\n */\nvar FieldSelect = function FieldSelect(props, ref) {\n  var _ConfigProvider$useCo;\n  var mode = props.mode,\n    valueEnum = props.valueEnum,\n    render = props.render,\n    renderFormItem = props.renderFormItem,\n    request = props.request,\n    fieldProps = props.fieldProps,\n    plain = props.plain,\n    children = props.children,\n    light = props.light,\n    proFieldKey = props.proFieldKey,\n    params = props.params,\n    label = props.label,\n    bordered = props.bordered,\n    id = props.id,\n    lightLabel = props.lightLabel,\n    labelTrigger = props.labelTrigger,\n    rest = _objectWithoutProperties(props, _excluded2);\n  var inputRef = useRef();\n  var intl = useIntl();\n  var keyWordsRef = useRef('');\n  var fieldNames = fieldProps.fieldNames;\n  useEffect(function () {\n    keyWordsRef.current = fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.searchValue;\n  }, [fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.searchValue]);\n  var _useFieldFetchData = useFieldFetchData(props),\n    _useFieldFetchData2 = _slicedToArray(_useFieldFetchData, 4),\n    loading = _useFieldFetchData2[0],\n    options = _useFieldFetchData2[1],\n    _fetchData = _useFieldFetchData2[2],\n    resetData = _useFieldFetchData2[3];\n  var _ref8 = (ConfigProvider === null || ConfigProvider === void 0 ? void 0 : (_ConfigProvider$useCo = ConfigProvider.useConfig) === null || _ConfigProvider$useCo === void 0 ? void 0 : _ConfigProvider$useCo.call(ConfigProvider)) || {\n      componentSize: 'middle'\n    },\n    componentSize = _ref8.componentSize;\n  useImperativeHandle(ref, function () {\n    return _objectSpread(_objectSpread({}, inputRef.current || {}), {}, {\n      fetchData: function fetchData(keyWord) {\n        return _fetchData(keyWord);\n      }\n    });\n  });\n  var optionsValueEnum = useMemo(function () {\n    if (mode !== 'read') return;\n    var _ref9 = fieldNames || {},\n      _ref9$label = _ref9.label,\n      labelPropsName = _ref9$label === void 0 ? 'label' : _ref9$label,\n      _ref9$value = _ref9.value,\n      valuePropsName = _ref9$value === void 0 ? 'value' : _ref9$value,\n      _ref9$options = _ref9.options,\n      optionsPropsName = _ref9$options === void 0 ? 'options' : _ref9$options;\n    var valuesMap = new Map();\n    var traverseOptions = function traverseOptions(_options) {\n      if (!(_options !== null && _options !== void 0 && _options.length)) {\n        return valuesMap;\n      }\n      var length = _options.length;\n      var i = 0;\n      while (i < length) {\n        var cur = _options[i++];\n        valuesMap.set(cur[valuePropsName], cur[labelPropsName]);\n        traverseOptions(cur[optionsPropsName]);\n      }\n      return valuesMap;\n    };\n    return traverseOptions(options);\n  }, [fieldNames, mode, options]);\n  if (mode === 'read') {\n    var dom = /*#__PURE__*/_jsx(_Fragment, {\n      children: proFieldParsingText(rest.text, ObjToMap(valueEnum || optionsValueEnum))\n    });\n    if (render) {\n      return render(rest.text, _objectSpread({\n        mode: mode\n      }, fieldProps), dom) || null;\n    }\n    return dom;\n  }\n  if (mode === 'edit' || mode === 'update') {\n    var renderDom = function renderDom() {\n      if (light) {\n        return /*#__PURE__*/_jsx(LightSelect, _objectSpread({\n          bordered: bordered,\n          id: id,\n          loading: loading,\n          ref: inputRef,\n          allowClear: true,\n          size: componentSize,\n          options: options,\n          label: label,\n          placeholder: intl.getMessage('tableForm.selectPlaceholder', '请选择'),\n          lightLabel: lightLabel,\n          labelTrigger: labelTrigger\n        }, fieldProps));\n      }\n      return /*#__PURE__*/_jsx(SearchSelect, _objectSpread(_objectSpread({\n        className: rest.className,\n        style: _objectSpread({\n          minWidth: 100\n        }, rest.style),\n        bordered: bordered,\n        id: id,\n        loading: loading,\n        ref: inputRef,\n        allowClear: true,\n        defaultSearchValue: props.defaultKeyWords,\n        notFoundContent: loading ? /*#__PURE__*/_jsx(Spin, {\n          size: \"small\"\n        }) : fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.notFoundContent,\n        fetchData: function fetchData(keyWord) {\n          keyWordsRef.current = keyWord !== null && keyWord !== void 0 ? keyWord : '';\n          _fetchData(keyWord);\n        },\n        resetData: resetData,\n        optionItemRender: function optionItemRender(item) {\n          if (typeof item.label === 'string' && keyWordsRef.current) {\n            return /*#__PURE__*/_jsx(Highlight, {\n              label: item.label,\n              words: [keyWordsRef.current]\n            });\n          }\n          return item.label;\n        },\n        placeholder: intl.getMessage('tableForm.selectPlaceholder', '请选择'),\n        label: label\n      }, fieldProps), {}, {\n        options: options\n      }), \"SearchSelect\");\n    };\n    var _dom = renderDom();\n    if (renderFormItem) {\n      return renderFormItem(rest.text, _objectSpread(_objectSpread({\n        mode: mode\n      }, fieldProps), {}, {\n        options: options\n      }), _dom) || null;\n    }\n    return _dom;\n  }\n  return null;\n};\nexport default /*#__PURE__*/React.forwardRef(FieldSelect);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}